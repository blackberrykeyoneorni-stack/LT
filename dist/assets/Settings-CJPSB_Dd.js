import{b as $e,g as Re,r as i,d as ze,ar as ts,b2 as ss,_ as Ae,e as w,aq as ns,az as as,am as os,j as e,s as O,f as ve,i as De,av as Ct,aA as is,b3 as rs,W as xe,ap as ls,h as be,l as kt,b4 as cs,b5 as ds,E as et,y as tt,p as g,q as U,o as v,T as c,B as d,P as r,m as zt,n as At,u as us,b6 as ps,a1 as xs,b7 as hs,U as _e,C as gs,D as y,a7 as S,a as V,Y as ms,a0 as $t,b8 as fs,aa as bs,ah as vs,w as js,b9 as ys,ba as Ss,t as ws,R as Cs}from"./index-C22NQhFl.js";import{D as Dt,a as ks,b as $s,t as Rs}from"./SuspensionService-DXcxfQqR.js";import{S as zs,a as K,F as As,D as Ds}from"./Slider-ClGxi03i.js";import{G as Pe}from"./Grid--m8fNPZP.js";import{d as Is}from"./Save-CXYIWxmB.js";import{S as st,T as re,F as Ms,I as Ts,b as Es}from"./TextField-Cwat4hnG.js";import{C as we}from"./Modal-DFD-Hqrv.js";import{M as Ce}from"./MenuItem-CuAxZLbe.js";import{D as ke}from"./Divider-CwLzSQnG.js";import{D as Ls,a as Bs,b as Ns}from"./DialogTitle-CqMM6fGb.js";import{D as Ws}from"./DialogActions-EAH2B_VR.js";import"./visuallyHidden-Dan1xhjv.js";import"./listItemTextClasses-DTEbvdVu.js";import"./dividerClasses-D3fG2uFZ.js";function _s(t){return $e("MuiCollapse",t)}Re("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Ps=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Fs=t=>{const{orientation:n,classes:o}=t,u={root:["root",`${n}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${n}`],wrapperInner:["wrapperInner",`${n}`]};return De(u,_s,o)},Gs=O("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:o}=t;return[n.root,n[o.orientation],o.state==="entered"&&n.entered,o.state==="exited"&&!o.in&&o.collapsedSize==="0px"&&n.hidden]}})(({theme:t,ownerState:n})=>w({height:0,overflow:"hidden",transition:t.transitions.create("height")},n.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},n.state==="entered"&&w({height:"auto",overflow:"visible"},n.orientation==="horizontal"&&{width:"auto"}),n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&{visibility:"hidden"})),Vs=O("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,n)=>n.wrapper})(({ownerState:t})=>w({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Us=O("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,n)=>n.wrapperInner})(({ownerState:t})=>w({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),It=i.forwardRef(function(n,o){const u=ze({props:n,name:"MuiCollapse"}),{addEndListener:m,children:j,className:p,collapsedSize:b="0px",component:A,easing:L,in:$,onEnter:R,onEntered:M,onEntering:_,onExit:l,onExited:h,onExiting:C,orientation:f="vertical",style:z,timeout:D=ss.standard,TransitionComponent:H=ts}=u,Z=Ae(u,Ps),X=w({},u,{orientation:f,collapsedSize:b}),P=Fs(X),se=ns(),he=as(),F=i.useRef(null),ne=i.useRef(),Y=typeof b=="number"?`${b}px`:b,J=f==="horizontal",ue=J?"width":"height",ge=i.useRef(null),Ie=os(o,ge),Q=x=>E=>{if(x){const B=ge.current;E===void 0?x(B):x(B,E)}},je=()=>F.current?F.current[J?"clientWidth":"clientHeight"]:0,Ge=Q((x,E)=>{F.current&&J&&(F.current.style.position="absolute"),x.style[ue]=Y,R&&R(x,E)}),Me=Q((x,E)=>{const B=je();F.current&&J&&(F.current.style.position="");const{duration:ee,easing:ae}=Ct({style:z,timeout:D,easing:L},{mode:"enter"});if(D==="auto"){const ye=se.transitions.getAutoHeightDuration(B);x.style.transitionDuration=`${ye}ms`,ne.current=ye}else x.style.transitionDuration=typeof ee=="string"?ee:`${ee}ms`;x.style[ue]=`${B}px`,x.style.transitionTimingFunction=ae,_&&_(x,E)}),Te=Q((x,E)=>{x.style[ue]="auto",M&&M(x,E)}),Ve=Q(x=>{x.style[ue]=`${je()}px`,l&&l(x)}),Ue=Q(h),Ee=Q(x=>{const E=je(),{duration:B,easing:ee}=Ct({style:z,timeout:D,easing:L},{mode:"exit"});if(D==="auto"){const ae=se.transitions.getAutoHeightDuration(E);x.style.transitionDuration=`${ae}ms`,ne.current=ae}else x.style.transitionDuration=typeof B=="string"?B:`${B}ms`;x.style[ue]=Y,x.style.transitionTimingFunction=ee,C&&C(x)}),Le=x=>{D==="auto"&&he.start(ne.current||0,x),m&&m(ge.current,x)};return e.jsx(H,w({in:$,onEnter:Ge,onEntered:Te,onEntering:Me,onExit:Ve,onExited:Ue,onExiting:Ee,addEndListener:Le,nodeRef:ge,timeout:D==="auto"?null:D},Z,{children:(x,E)=>e.jsx(Gs,w({as:A,className:ve(P.root,p,{entered:P.entered,exited:!$&&Y==="0px"&&P.hidden}[x]),style:w({[J?"minWidth":"minHeight"]:Y},z),ref:Ie},E,{ownerState:w({},X,{state:x}),children:e.jsx(Vs,{ownerState:w({},X,{state:x}),className:P.wrapper,ref:F,children:e.jsx(Us,{ownerState:w({},X,{state:x}),className:P.wrapperInner,children:j})})}))}))});It.muiSupportAuto=!0;const Mt=i.createContext({});function Os(t){return $e("MuiAccordion",t)}const Fe=Re("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Hs=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],qs=t=>{const{classes:n,square:o,expanded:u,disabled:m,disableGutters:j}=t;return De({root:["root",!o&&"rounded",u&&"expanded",m&&"disabled",!j&&"gutters"],region:["region"]},Os,n)},Ks=O(xe,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:o}=t;return[{[`& .${Fe.region}`]:n.region},n.root,!o.square&&n.rounded,!o.disableGutters&&n.gutters]}})(({theme:t})=>{const n={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],n),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Fe.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Fe.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}},({theme:t})=>({variants:[{props:n=>!n.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:n=>!n.disableGutters,style:{[`&.${Fe.expanded}`]:{margin:"16px 0"}}}]})),le=i.forwardRef(function(n,o){const u=ze({props:n,name:"MuiAccordion"}),{children:m,className:j,defaultExpanded:p=!1,disabled:b=!1,disableGutters:A=!1,expanded:L,onChange:$,square:R=!1,slots:M={},slotProps:_={},TransitionComponent:l,TransitionProps:h}=u,C=Ae(u,Hs),[f,z]=is({controlled:L,default:p,name:"Accordion",state:"expanded"}),D=i.useCallback(J=>{z(!f),$&&$(J,!f)},[f,$,z]),[H,...Z]=i.Children.toArray(m),X=i.useMemo(()=>({expanded:f,disabled:b,disableGutters:A,toggle:D}),[f,b,A,D]),P=w({},u,{square:R,disabled:b,disableGutters:A,expanded:f}),se=qs(P),he=w({transition:l},M),F=w({transition:h},_),[ne,Y]=rs("transition",{elementType:It,externalForwardedProps:{slots:he,slotProps:F},ownerState:P});return e.jsxs(Ks,w({className:ve(se.root,j),ref:o,ownerState:P,square:R},C,{children:[e.jsx(Mt.Provider,{value:X,children:H}),e.jsx(ne,w({in:f,timeout:"auto"},Y,{children:e.jsx("div",{"aria-labelledby":H.props.id,id:H.props["aria-controls"],role:"region",className:se.region,children:Z})}))]}))});function Zs(t){return $e("MuiAccordionDetails",t)}Re("MuiAccordionDetails",["root"]);const Js=["className"],Xs=t=>{const{classes:n}=t;return De({root:["root"]},Zs,n)},Ys=O("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(t,n)=>n.root})(({theme:t})=>({padding:t.spacing(1,2,2)})),ce=i.forwardRef(function(n,o){const u=ze({props:n,name:"MuiAccordionDetails"}),{className:m}=u,j=Ae(u,Js),p=u,b=Xs(p);return e.jsx(Ys,w({className:ve(b.root,m),ref:o,ownerState:p},j))});function Qs(t){return $e("MuiAccordionSummary",t)}const fe=Re("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),en=["children","className","expandIcon","focusVisibleClassName","onClick"],tn=t=>{const{classes:n,expanded:o,disabled:u,disableGutters:m}=t;return De({root:["root",o&&"expanded",u&&"disabled",!m&&"gutters"],focusVisible:["focusVisible"],content:["content",o&&"expanded",!m&&"contentGutters"],expandIconWrapper:["expandIconWrapper",o&&"expanded"]},Qs,n)},sn=O(ls,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(t,n)=>n.root})(({theme:t})=>{const n={duration:t.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],n),[`&.${fe.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${fe.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${fe.disabled})`]:{cursor:"pointer"},variants:[{props:o=>!o.disableGutters,style:{[`&.${fe.expanded}`]:{minHeight:64}}}]}}),nn=O("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(t,n)=>n.content})(({theme:t})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:n=>!n.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${fe.expanded}`]:{margin:"20px 0"}}}]})),an=O("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(t,n)=>n.expandIconWrapper})(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${fe.expanded}`]:{transform:"rotate(180deg)"}})),de=i.forwardRef(function(n,o){const u=ze({props:n,name:"MuiAccordionSummary"}),{children:m,className:j,expandIcon:p,focusVisibleClassName:b,onClick:A}=u,L=Ae(u,en),{disabled:$=!1,disableGutters:R,expanded:M,toggle:_}=i.useContext(Mt),l=f=>{_&&_(f),A&&A(f)},h=w({},u,{expanded:M,disabled:$,disableGutters:R}),C=tn(h);return e.jsxs(sn,w({focusRipple:!1,disableRipple:!0,disabled:$,component:"div","aria-expanded":M,className:ve(C.root,j),focusVisibleClassName:ve(C.focusVisible,b),onClick:l,ref:o,ownerState:h},L,{children:[e.jsx(nn,{className:C.content,ownerState:h,children:m}),p&&e.jsx(an,{className:C.expandIconWrapper,ownerState:h,children:p})]}))});function on(t){return $e("MuiSwitch",t)}const T=Re("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),rn=["className","color","edge","size","sx"],ln=t=>{const{classes:n,edge:o,size:u,color:m,checked:j,disabled:p}=t,b={root:["root",o&&`edge${be(o)}`,`size${be(u)}`],switchBase:["switchBase",`color${be(m)}`,j&&"checked",p&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},A=De(b,on,n);return w({},n,A)},cn=O("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,n)=>{const{ownerState:o}=t;return[n.root,o.edge&&n[`edge${be(o.edge)}`],n[`size${be(o.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${T.thumb}`]:{width:16,height:16},[`& .${T.switchBase}`]:{padding:4,[`&.${T.checked}`]:{transform:"translateX(16px)"}}}}]}),dn=O(zs,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,n)=>{const{ownerState:o}=t;return[n.switchBase,{[`& .${T.input}`]:n.input},o.color!=="default"&&n[`color${be(o.color)}`]]}})(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${T.checked}`]:{transform:"translateX(20px)"},[`&.${T.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${T.checked} + .${T.track}`]:{opacity:.5},[`&.${T.disabled} + .${T.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${T.input}`]:{left:"-100%",width:"300%"}}),({theme:t})=>({"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:kt(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{color:n},style:{[`&.${T.checked}`]:{color:(t.vars||t).palette[n].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:kt(t.palette[n].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${T.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${n}DisabledColor`]:`${t.palette.mode==="light"?cs(t.palette[n].main,.62):ds(t.palette[n].main,.55)}`}},[`&.${T.checked} + .${T.track}`]:{backgroundColor:(t.vars||t).palette[n].main}}}))]})),un=O("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,n)=>n.track})(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`})),pn=O("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,n)=>n.thumb})(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Rt=i.forwardRef(function(n,o){const u=ze({props:n,name:"MuiSwitch"}),{className:m,color:j="primary",edge:p=!1,size:b="medium",sx:A}=u,L=Ae(u,rn),$=w({},u,{color:j,edge:p,size:b}),R=ln($),M=e.jsx(pn,{className:R.thumb,ownerState:$});return e.jsxs(cn,{className:ve(R.root,m),sx:A,ownerState:$,children:[e.jsx(dn,w({type:"checkbox",icon:M,checkedIcon:M,ref:o,ownerState:$},L,{classes:w({},R,{root:R.switchBase})})),e.jsx(un,{className:R.track,ownerState:$})]})}),xn=async t=>{if(!t)throw new Error("Kein User eingeloggt.");const n={meta:{date:new Date().toISOString(),userId:t.uid,version:"1.0"},items:[],sessions:[],wishlist:[],settings:{}};try{const[o,u,m]=await Promise.all([et(tt(g,`users/${t.uid}/items`)),et(tt(g,`users/${t.uid}/sessions`)),et(tt(g,`users/${t.uid}/wishlist`))]);n.items=o.docs.map(p=>({id:p.id,...p.data()})),n.sessions=u.docs.map(p=>({id:p.id,...p.data()})),n.wishlist=m.docs.map(p=>({id:p.id,...p.data()}));const j=["brands","categories","materials","preferences","enforcement","locations"];for(const p of j){const b=await U(v(g,`users/${t.uid}/settings/${p}`));b.exists()&&(n.settings[p]=b.data())}return n}catch(o){throw console.error("Backup Error:",o),new Error("Daten konnten nicht geladen werden: "+o.message)}},hn=t=>{const o=`lacetracker_backup_${new Date().toISOString().split("T")[0]}.json`,u=JSON.stringify(t,null,2),m=new Blob([u],{type:"application/json"}),j=URL.createObjectURL(m),p=document.createElement("a");p.href=j,p.download=o,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(j)},gn=t=>[{label:"The Bait",min:t/6,max:t/3,color:r.accents.green,weight:"20%"},{label:"The Standard",min:t/3,max:t*2/3,color:r.primary.main,weight:"50%"},{label:"The Wall",min:t*2/3,max:t,color:r.accents.red,weight:"30%"}];function mn({rules:t,onChange:n}){var A,L,$,R,M,_;if(!t)return e.jsx(c,{sx:{p:3},children:"Lade Konfiguration..."});const o=((A=t.instruction)==null?void 0:A.forcedReleaseMethods)||{hand:0,toy_vaginal:0,toy_anal:0},u=(l,h,C)=>{const f={...t,[l]:{...t[l],[h]:C}};n(f)},m=(l,h)=>{const C={...t,[l]:h};n(C)},j=(l,h)=>{var Z;if(!((Z=t.instruction)!=null&&Z.forcedReleaseMethods))return;const C={...t.instruction.forcedReleaseMethods};C[l]=parseFloat(h.toFixed(2));let f=C.toy_vaginal||0,z=C.toy_anal||0;l==="toy_vaginal"?f+z>1&&(z=parseFloat((1-f).toFixed(2))):l==="toy_anal"&&f+z>1&&(f=parseFloat((1-z).toFixed(2)));let D=parseFloat((1-f-z).toFixed(2));D=Math.max(0,Math.min(1,D)),u("instruction","forcedReleaseMethods",{hand:D,toy_vaginal:f,toy_anal:z})},p=((L=t.tzd)==null?void 0:L.tzdMaxHours)||Dt.tzd.tzdMaxHours,b=gn(p);return e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(xe,{sx:{p:3,bgcolor:"rgba(255,255,255,0.05)",borderLeft:`4px solid ${r.accents.green}`},children:[e.jsx(c,{variant:"h6",sx:{color:r.accents.green},gutterBottom:!0,children:"Tragezeit-Ziel (Basis)"}),e.jsxs(d,{sx:{px:2},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(c,{variant:"body2",children:"Tägliches Ziel"}),e.jsxs(c,{sx:{color:r.accents.green},fontWeight:"bold",children:[t.currentDailyGoal?t.currentDailyGoal.toFixed(1):"4.0"," Stunden"]})]}),e.jsx(K,{value:t.currentDailyGoal||4,min:1,max:12,step:.5,onChange:(l,h)=>m("currentDailyGoal",h),sx:{color:r.accents.green},marks:[{value:4,label:"4h"},{value:8,label:"8h"},{value:12,label:"12h"}]})]})]}),e.jsxs(xe,{sx:{p:3,bgcolor:"rgba(255,255,255,0.05)",borderLeft:`4px solid ${r.accents.red}`},children:[e.jsx(c,{variant:"h6",color:"primary",gutterBottom:!0,children:"Zeitloses Diktat (TZD)"}),e.jsxs(d,{sx:{px:2,mb:4},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(c,{variant:"body2",children:"Trigger Wahrscheinlichkeit"}),e.jsxs(c,{color:"primary",fontWeight:"bold",children:[($=t.tzd)!=null&&$.triggerChance?(t.tzd.triggerChance*100).toFixed(1):"0.0","%"]})]}),e.jsx(K,{value:((R=t.tzd)==null?void 0:R.triggerChance)||.08,min:0,max:.5,step:.01,onChange:(l,h)=>u("tzd","triggerChance",h)})]}),e.jsxs(d,{sx:{px:2,mb:4},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(c,{variant:"body2",sx:{fontWeight:"bold"},children:"Maximaldauer (Anker)"}),e.jsxs(c,{variant:"h5",sx:{color:r.accents.red,fontWeight:"bold"},children:[p," Std."]})]}),e.jsx(K,{value:p,min:6,max:72,step:6,onChange:(l,h)=>u("tzd","tzdMaxHours",h),marks:[{value:6,label:"6h"},{value:24,label:"24h"},{value:48,label:"48h"},{value:72,label:"72h"}],sx:{color:r.accents.red,"& .MuiSlider-thumb":{boxShadow:`0 0 10px ${r.accents.red}`}}})]}),e.jsx(c,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2,color:"text.secondary"},children:"Berechnete Zonen (Dauer & Wahrscheinlichkeit)"}),b.map((l,h)=>e.jsx(d,{sx:{mb:2,px:2,borderLeft:`2px solid ${l.color}`,pl:2,bgcolor:"rgba(0,0,0,0.2)",py:1},children:e.jsxs(Pe,{container:!0,justifyContent:"space-between",alignItems:"center",children:[e.jsx(Pe,{item:!0,xs:5,children:e.jsx(c,{variant:"body2",fontWeight:"bold",sx:{color:l.color},children:l.label})}),e.jsx(Pe,{item:!0,xs:4,sx:{textAlign:"center"},children:e.jsxs(c,{variant:"caption",sx:{color:"#fff"},children:[Math.round(l.min),"-",Math.round(l.max)," Std"]})}),e.jsx(Pe,{item:!0,xs:3,sx:{textAlign:"right"},children:e.jsx(c,{variant:"caption",sx:{color:"text.secondary"},children:l.weight})})]})},h))]}),e.jsxs(xe,{sx:{p:3,bgcolor:"rgba(255,255,255,0.05)",borderLeft:`4px solid ${r.accents.purple}`},children:[e.jsx(c,{variant:"h6",sx:{color:r.accents.purple},gutterBottom:!0,children:"Forced Release"}),e.jsxs(d,{sx:{px:2,mb:4},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(c,{children:"Trigger Chance (Nachts)"}),e.jsxs(c,{sx:{color:r.accents.purple},fontWeight:"bold",children:[(M=t.instruction)!=null&&M.forcedReleaseTriggerChance?(t.instruction.forcedReleaseTriggerChance*100).toFixed(0):"0","%"]})]}),e.jsx(K,{value:((_=t.instruction)==null?void 0:_.forcedReleaseTriggerChance)||.15,min:0,max:1,step:.01,onChange:(l,h)=>u("instruction","forcedReleaseTriggerChance",h),sx:{color:r.accents.purple}})]}),e.jsx(c,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2,color:"text.secondary"},children:"Methoden Wahrscheinlichkeit"}),e.jsxs(d,{sx:{mb:2,px:2},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(c,{variant:"caption",children:"Toy Vaginal"}),e.jsxs(c,{variant:"caption",fontWeight:"bold",children:[(o.toy_vaginal*100).toFixed(0),"%"]})]}),e.jsx(K,{value:o.toy_vaginal||0,min:0,max:1,step:.01,onChange:(l,h)=>j("toy_vaginal",h),sx:{color:r.accents.pink}})]}),e.jsxs(d,{sx:{mb:2,px:2},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(c,{variant:"caption",children:"Toy Anal"}),e.jsxs(c,{variant:"caption",fontWeight:"bold",children:[(o.toy_anal*100).toFixed(0),"%"]})]}),e.jsx(K,{value:o.toy_anal||0,min:0,max:1,step:.01,onChange:(l,h)=>j("toy_anal",h),sx:{color:r.accents.purple}})]}),e.jsxs(d,{sx:{mb:2,px:2,opacity:.6},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(c,{variant:"caption",children:"Hand (Restwahrscheinlichkeit)"}),e.jsxs(c,{variant:"caption",fontWeight:"bold",children:[(o.hand*100).toFixed(0),"%"]})]}),e.jsx(K,{value:o.hand||0,min:0,max:1,disabled:!0,sx:{color:"text.secondary"}})]})]})]})}var nt={},fn=zt;Object.defineProperty(nt,"__esModule",{value:!0});var Tt=nt.default=void 0,bn=fn(At()),vn=e;Tt=nt.default=(0,bn.default)((0,vn.jsx)("path",{d:"M20 6h-4V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2M10 4h4v2h-4zm6 11h-3v3h-2v-3H8v-2h3v-3h2v3h3z"}),"MedicalServices");var at={},jn=zt;Object.defineProperty(at,"__esModule",{value:!0});var Et=at.default=void 0,yn=jn(At()),Sn=e;Et=at.default=(0,yn.default)((0,Sn.jsx)("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune");function Nn(){const{currentUser:t,logout:n}=us(),{isBiometricActive:o,updateStatus:u}=ps(),{startBindingScan:m,isScanning:j}=xs(),[p,b]=i.useState([]),[A,L]=i.useState(""),[$,R]=i.useState([]),[M,_]=i.useState(""),[l,h]=i.useState({}),[C,f]=i.useState(""),[z,D]=i.useState(""),[H,Z]=i.useState([]),[X,P]=i.useState(""),[se,he]=i.useState({}),[F,ne]=i.useState(null),[Y,J]=i.useState([]),[ue,ge]=i.useState(""),[Ie,Q]=i.useState([]),[je,Ge]=i.useState(""),[Me,Te]=i.useState([]),[Ve,Ue]=i.useState(""),[Ee,Le]=i.useState([]),[x,E]=i.useState(""),[B,ee]=i.useState({}),[ae,ye]=i.useState(""),[Oe,Lt]=i.useState(2),[He,ot]=i.useState(24),[qe,it]=i.useState(1),[Ke,rt]=i.useState(!1),[Ze,lt]=i.useState(15),[Je,ct]=i.useState(null),[Bt,Nt]=i.useState(!1),[dt,Wt]=i.useState([]),[_t,Be]=i.useState(!1),[G,Se]=i.useState({type:"medical",reason:"",startDate:"",endDate:""}),[Pt,Ft]=i.useState(!0),[ut,pt]=i.useState(!1),[Xe,xt]=i.useState(!1),[Ne,ht]=i.useState({open:!1,message:"",severity:"success"}),N=(s,a="success")=>ht({open:!0,message:s,severity:a}),gt=()=>ht({...Ne,open:!1});i.useEffect(()=>{t&&(Gt(),Vt(),Ye())},[t]);const Gt=async()=>{var s;try{const a=t.uid,[k,q,te,pe,ie,bt,vt,jt,yt,St,wt]=await Promise.all([U(v(g,`users/${a}/settings/brands`)),U(v(g,`users/${a}/settings/materials`)),U(v(g,`users/${a}/settings/categories`)),U(v(g,`users/${a}/settings/locations`)),U(v(g,`users/${a}/settings/locationIndex`)),U(v(g,`users/${a}/settings/preferences`)),U(v(g,`users/${a}/settings/archiveReasons`)),U(v(g,`users/${a}/settings/runLocations`)),U(v(g,`users/${a}/settings/runCauses`)),U(v(g,`users/${a}/settings/vibeTags`)),U(v(g,`users/${a}/settings/protocol`))]);if(k.exists()&&b(k.data().list||[]),q.exists()&&R(q.data().list||[]),te.exists()&&h(te.data().structure||{}),pe.exists()&&Z(pe.data().list||[]),ie.exists()&&he(ie.data().mapping||{}),bt.exists()){const I=bt.data();ot(I.nylonRestingHours||24),it(I.maxInstructionItems||1),rt(I.sissyProtocolEnabled||!1),lt(I.nightReleaseProbability||15),ee(I.categoryWeights||{})}let W=JSON.parse(JSON.stringify(Dt));if(W.currentDailyGoal=4,wt.exists()){const I=wt.data();I.currentDailyGoal!==void 0&&(W.currentDailyGoal=I.currentDailyGoal),W.tzd={...W.tzd,...I.tzd||{},durationMatrix:I.tzd&&I.tzd.durationMatrix?I.tzd.durationMatrix:W.tzd.durationMatrix},W.purity={...W.purity,...I.purity||{}},W.instruction={...W.instruction,...I.instruction||{},forcedReleaseMethods:{...W.instruction.forcedReleaseMethods,...((s=I.instruction)==null?void 0:s.forcedReleaseMethods)||{}}},W.punishment={...W.punishment,...I.punishment||{}}}ct(W),J(vt.exists()?vt.data().list:["Laufmasche","Verschlissen","Verloren","Spende"]),Q(jt.exists()?jt.data().list:["Zehe","Ferse","Sohle","Oberschenkel","Zwickel"]),Te(yt.exists()?yt.data().list:["Schuhe","Nägel","Schmuck","Möbel","Unbekannt"]),Le(St.exists()?St.data().list:["Business","Casual","Fetisch","Sport","Alltag"])}catch(a){console.error(a)}finally{Ft(!1)}},Ye=async()=>{try{const s=await ks(t.uid);Wt(s)}catch(s){console.error(s)}},Vt=async()=>{const s=await hs();Nt(s)},Ut=async()=>{xt(!0);try{const s=vs(g),a=t.uid,k=v(g,`users/${a}/settings/preferences`);if(s.set(k,{nylonRestingHours:He,maxInstructionItems:qe,sissyProtocolEnabled:Ke,nightReleaseProbability:Ze,categoryWeights:B},{merge:!0}),Je){const q=v(g,`users/${a}/settings/protocol`);s.set(q,{...Je,lastGoalUpdate:js()},{merge:!0})}s.set(v(g,`users/${a}/settings/brands`),{list:p},{merge:!0}),s.set(v(g,`users/${a}/settings/materials`),{list:$},{merge:!0}),s.set(v(g,`users/${a}/settings/locations`),{list:H},{merge:!0}),s.set(v(g,`users/${a}/settings/archiveReasons`),{list:Y},{merge:!0}),s.set(v(g,`users/${a}/settings/runLocations`),{list:Ie},{merge:!0}),s.set(v(g,`users/${a}/settings/runCauses`),{list:Me},{merge:!0}),s.set(v(g,`users/${a}/settings/vibeTags`),{list:Ee},{merge:!0}),s.set(v(g,`users/${a}/settings/categories`),{structure:l},{merge:!0}),s.set(v(g,`users/${a}/settings/locationIndex`),{mapping:se},{merge:!0}),await s.commit(),N("Alle Einstellungen erfolgreich gespeichert.","success")}catch(s){console.error("Save Error:",s),N("Fehler beim Speichern: "+s.message,"error")}finally{xt(!1)}},Ot=async()=>{if(!(!G.startDate||!G.endDate||!G.reason))try{await $s(t.uid,G),N("Auszeit beantragt & genehmigt.","success"),Be(!1),Ye(),Se({type:"medical",reason:"",startDate:"",endDate:""})}catch(s){N(s.message,"error")}},Ht=async s=>{window.confirm("Bist du sicher, dass du den Dienst vorzeitig wieder aufnehmen willst?")&&(await Rs(t.uid,s),Ye(),N("Willkommen zurück.","success"))},qt=async s=>{s.target.checked?await ys()?(u(),N("Biometrie aktiviert","success")):N("Konnte Biometrie nicht aktivieren","error"):(Ss(),u(),N("Biometrie deaktiviert","info"))},Kt=s=>{ne(s),m(async a=>{try{const k={...se,[a]:s};await ws(v(g,`users/${t.uid}/settings/locationIndex`),{mapping:k},{merge:!0}),he(k),N(`Ort ${s} verknüpft!`,"success")}catch{N("Fehler","error")}finally{ne(null)}})},We=s=>h(s),Zt=()=>{if(!C.trim())return;if(l[C.trim()])return N("Existiert bereits","error");const s={...l,[C.trim()]:[]};We(s),f("")},Jt=s=>{if(!window.confirm(`Kategorie "${s}" löschen?`))return;const a={...l};delete a[s],We(a)},Xt=s=>{if(!z.trim())return;const a=l[s]||[];a.includes(z.trim())||(We({...l,[s]:[...a,z.trim()]}),D(""))},mt=(s,a,k,q)=>{if(!a.trim())return;const te=[...q,a.trim()];k(te)},ft=(s,a,k,q)=>{const te=q.filter(pe=>pe!==a);k(te)},Yt=()=>{ae&&(ee(s=>({...s,[ae]:Oe})),ye(""))},Qt=s=>{const a={...B};delete a[s],ee(a)},es=async()=>{pt(!0);try{const s=await xn(t.uid);hn(s),N("Backup erstellt","success")}catch{N("Backup Fehler","error")}finally{pt(!1)}},oe=({icon:s,title:a,color:k})=>e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:1,color:k||"text.primary"},children:[e.jsx(Cs,{sx:{bgcolor:`${k}22`,color:k,width:32,height:32},children:e.jsx(s,{fontSize:"small"})}),e.jsx(c,{variant:"h6",sx:{fontSize:"1.1rem",fontWeight:600},children:a})]}),me=({title:s,items:a,newItem:k,setNewItem:q,listName:te,setList:pe})=>e.jsxs(d,{sx:{mb:2},children:[e.jsx(c,{variant:"subtitle2",sx:{mb:1,color:"text.secondary"},children:s}),e.jsxs(d,{sx:{display:"flex",gap:1,mb:1},children:[e.jsx(re,{size:"small",fullWidth:!0,value:k,onChange:ie=>q(ie.target.value),placeholder:"Neuer Eintrag..."}),e.jsx(V,{variant:"contained",size:"small",onClick:()=>{mt(te,k,pe,a),q("")},children:e.jsx(S.Add,{})})]}),e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.map(ie=>e.jsx(we,{label:ie,onDelete:()=>ft(te,ie,pe,a),size:"small"},ie))})]});if(Pt)return e.jsx(d,{sx:{display:"flex",justifyContent:"center",mt:10},children:e.jsx(_e,{})});const Qe=[];return Object.keys(l).forEach(s=>{Qe.push({label:`HAUPT: ${s}`,value:s}),l[s]&&l[s].forEach(a=>Qe.push({label:`• ${a}`,value:a}))}),e.jsxs(gs,{maxWidth:"md",disableGutters:!0,sx:{pt:1,pb:15,px:.5},children:[e.jsx(c,{variant:"h4",gutterBottom:!0,sx:{...y.textGradient,ml:1},children:"Einstellungen"}),e.jsxs(le,{sx:{...y.accordion.root,mb:1,borderLeft:`4px solid ${r.accents.gold}`},children:[e.jsx(de,{expandIcon:e.jsx(S.Expand,{}),children:e.jsx(oe,{icon:Tt,title:"Protokoll-Verwaltung",color:r.accents.gold})}),e.jsxs(ce,{sx:{...y.accordion.details,p:1.5},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(c,{variant:"body2",color:"text.secondary",children:"Geplante Ausfallzeiten"}),e.jsx(V,{variant:"contained",size:"small",sx:{bgcolor:r.accents.gold,color:"#000"},onClick:()=>Be(!0),startIcon:e.jsx(S.Add,{}),children:"Beantragen"})]}),e.jsxs(st,{spacing:1,children:[dt.length===0&&e.jsx(c,{variant:"caption",sx:{fontStyle:"italic",color:r.text.muted},children:"Keine geplanten Auszeiten."}),dt.map(s=>e.jsxs(xe,{sx:{p:2,bgcolor:"rgba(255,255,255,0.05)",borderLeft:`2px solid ${r.accents.gold}`},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(c,{variant:"subtitle2",fontWeight:"bold",children:[s.type.toUpperCase(),": ",s.reason]}),s.status==="active"&&e.jsx(we,{label:"AKTIV",color:"warning",size:"small"})]}),e.jsxs(c,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:[s.startDate.toLocaleDateString()," - ",s.endDate.toLocaleDateString()]}),s.status==="active"&&e.jsx(V,{size:"small",color:"inherit",onClick:()=>Ht(s.id),sx:{mt:1,fontSize:"0.7rem"},children:"Vorzeitig beenden"})]},s.id))]})]})]}),e.jsxs(le,{sx:{...y.accordion.root,mb:1,borderLeft:`4px solid ${r.accents.purple}`},children:[e.jsx(de,{expandIcon:e.jsx(S.Expand,{}),children:e.jsx(oe,{icon:Et,title:"Protokoll Konfiguration (Core)",color:r.accents.purple})}),e.jsx(ce,{sx:{...y.accordion.details,p:1.5},children:e.jsx(mn,{rules:Je,onChange:ct})})]}),e.jsxs(le,{sx:{...y.accordion.root,mb:1,borderLeft:`4px solid ${r.primary.main}`},children:[e.jsx(de,{expandIcon:e.jsx(S.Expand,{}),children:e.jsx(oe,{icon:S.Track,title:"Präferenzen & Limits",color:r.primary.main})}),e.jsxs(ce,{sx:{...y.accordion.details,p:1.5},children:[e.jsxs(d,{sx:{mb:3},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(c,{variant:"body2",color:"text.secondary",children:"Max. Items pro Anweisung"}),e.jsx(c,{fontWeight:"bold",color:"primary",children:qe})]}),e.jsx(K,{value:qe,min:1,max:3,step:1,marks:!0,onChange:(s,a)=>it(a),sx:{color:r.primary.main}})]}),e.jsxs(d,{sx:{mb:2},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(c,{variant:"body2",color:"text.secondary",children:"Ruhezeit für Nylons"}),e.jsxs(c,{fontWeight:"bold",color:"secondary",children:[He," Std"]})]}),e.jsx(K,{value:He,min:0,max:72,step:4,onChange:(s,a)=>ot(a),sx:{color:r.secondary.main}})]}),e.jsxs(st,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(d,{children:[e.jsx(c,{variant:"body1",children:"Hardcore Protokoll"}),e.jsx(c,{variant:"caption",color:"text.secondary",children:"Erzwingt Ingestion & Challenges"})]}),e.jsx(Rt,{checked:Ke,onChange:s=>rt(s.target.checked),color:"error"})]}),Ke&&e.jsxs(d,{sx:{mt:2,pl:2,borderLeft:`2px solid ${r.accents.red}`},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[e.jsx(c,{variant:"caption",color:"error",children:"Chance Start-Challenge"}),e.jsxs(c,{variant:"caption",color:"error",fontWeight:"bold",children:[Ze,"%"]})]}),e.jsx(K,{value:Ze,min:0,max:100,step:5,onChange:(s,a)=>lt(a),sx:{color:r.accents.red}})]})]})]}),e.jsxs(le,{sx:{...y.accordion.root,mb:1,borderLeft:`4px solid ${r.accents.green}`},children:[e.jsx(de,{expandIcon:e.jsx(S.Expand,{}),children:e.jsx(oe,{icon:S.Category,title:"Kategorie Struktur",color:r.accents.green})}),e.jsxs(ce,{sx:{...y.accordion.details,p:1.5},children:[e.jsxs(d,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(re,{size:"small",fullWidth:!0,label:"Neue Hauptkategorie",value:C,onChange:s=>f(s.target.value)}),e.jsx(V,{variant:"contained",sx:{bgcolor:r.accents.green},onClick:Zt,children:e.jsx(S.Add,{})})]}),e.jsx(st,{spacing:2,children:Object.keys(l).map(s=>e.jsxs(xe,{sx:{p:2,bgcolor:"rgba(255,255,255,0.03)"},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(c,{variant:"subtitle1",fontWeight:"bold",sx:{color:r.accents.green},children:s}),e.jsx(ms,{size:"small",color:"error",onClick:()=>Jt(s),children:e.jsx(S.Delete,{})})]}),e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:l[s].map(a=>e.jsx(we,{label:a,size:"small",onDelete:()=>We({...l,[s]:l[s].filter(k=>k!==a)})},a))}),e.jsxs(d,{sx:{display:"flex",gap:1},children:[e.jsx(re,{size:"small",fullWidth:!0,placeholder:"Sub...",value:z,onChange:a=>D(a.target.value)}),e.jsx(V,{size:"small",onClick:()=>Xt(s),children:e.jsx(S.Add,{})})]})]},s))})]})]}),e.jsxs(le,{sx:{...y.accordion.root,mb:1,borderLeft:`4px solid ${r.accents.purple}`},children:[e.jsx(de,{expandIcon:e.jsx(S.Expand,{}),children:e.jsx(oe,{icon:S.Brain,title:"Algorithmus",color:r.accents.purple})}),e.jsxs(ce,{sx:{...y.accordion.details,p:1.5},children:[e.jsx($t,{severity:"info",sx:{mb:2,bgcolor:"rgba(255,255,255,0.05)",color:"#fff"},children:"Wahrscheinlichkeiten für die Zufallsauswahl."}),e.jsxs(d,{sx:{display:"flex",gap:1,alignItems:"flex-end",mb:2},children:[e.jsxs(Ms,{fullWidth:!0,size:"small",children:[e.jsx(Ts,{children:"Kategorie"}),e.jsx(Es,{value:ae,label:"Kategorie",onChange:s=>ye(s.target.value),children:Qe.map(s=>e.jsx(Ce,{value:s.value,children:s.label},s.value))})]}),e.jsxs(d,{sx:{width:150,px:1},children:[e.jsxs(c,{variant:"caption",children:["Gewicht: x",Oe]}),e.jsx(K,{value:Oe,min:2,max:10,onChange:(s,a)=>Lt(a),size:"small",sx:{color:r.accents.purple}})]}),e.jsx(V,{variant:"contained",onClick:Yt,sx:{bgcolor:r.accents.purple,minWidth:40},children:e.jsx(S.Add,{})})]}),e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Object.entries(B).map(([s,a])=>e.jsx(we,{label:`${s}: ${a}x`,onDelete:()=>Qt(s),variant:"outlined",sx:{borderColor:r.accents.purple,color:r.accents.purple}},s))})]})]}),e.jsxs(le,{sx:{...y.accordion.root,mb:1,borderLeft:`4px solid ${r.accents.red}`},children:[e.jsx(de,{expandIcon:e.jsx(S.Expand,{}),children:e.jsx(oe,{icon:fs,title:"Forensik & Attribute",color:r.accents.red})}),e.jsxs(ce,{sx:{...y.accordion.details,p:1.5},children:[e.jsx(me,{title:"Verlust-Ursachen (Archiv)",items:Y,newItem:ue,setNewItem:ge,listName:"archiveReasons",setList:J}),e.jsx(ke,{sx:{my:1}}),e.jsx(me,{title:"Laufmaschen-Orte",items:Ie,newItem:je,setNewItem:Ge,listName:"runLocations",setList:Q}),e.jsx(ke,{sx:{my:1}}),e.jsx(me,{title:"Laufmaschen-Gründe",items:Me,newItem:Ve,setNewItem:Ue,listName:"runCauses",setList:Te}),e.jsx(ke,{sx:{my:1}}),e.jsx(me,{title:"Vibe Tags",items:Ee,newItem:x,setNewItem:E,listName:"vibeTags",setList:Le})]})]}),e.jsxs(le,{sx:{...y.accordion.root,mb:1,borderLeft:`4px solid ${r.accents.blue}`},children:[e.jsx(de,{expandIcon:e.jsx(S.Expand,{}),children:e.jsx(oe,{icon:S.Inventory,title:"Listen & Orte",color:r.accents.blue})}),e.jsxs(ce,{sx:{...y.accordion.details,p:1.5},children:[e.jsx(c,{variant:"subtitle2",sx:{mb:1},children:"Lagerorte"}),e.jsxs(d,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(re,{size:"small",fullWidth:!0,value:X,onChange:s=>P(s.target.value)}),e.jsx(V,{onClick:()=>{mt("locations",X,Z,H),P("")},variant:"contained",children:e.jsx(S.Add,{})})]}),e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:3},children:H.map(s=>e.jsx(we,{label:s,onDelete:()=>ft("locations",s,Z,H),size:"small",clickable:!0,onClick:()=>Kt(s),color:F===s?"secondary":"default",icon:F===s?e.jsx(_e,{size:16}):e.jsx(S.Nfc,{})},s))}),e.jsx(ke,{sx:{my:2}}),e.jsx(me,{title:"Marken",items:p,newItem:A,setNewItem:L,listName:"brands",setList:b}),e.jsx(ke,{sx:{my:2}}),e.jsx(me,{title:"Materialien",items:$,newItem:M,setNewItem:_,listName:"materials",setList:R})]})]}),e.jsxs(le,{sx:{...y.accordion.root,mb:10,borderLeft:"4px solid #fff"},children:[e.jsx(de,{expandIcon:e.jsx(S.Expand,{}),children:e.jsx(oe,{icon:S.Settings,title:"System & Backup",color:"#fff"})}),e.jsxs(ce,{sx:{...y.accordion.details,p:1.5},children:[e.jsx(As,{control:e.jsx(Rt,{checked:o,onChange:qt,disabled:!Bt}),label:"Biometrische Authentifizierung (Fingerprint)",sx:{mb:2,display:"block"}}),e.jsx(V,{variant:"outlined",fullWidth:!0,onClick:es,disabled:ut,startIcon:ut?e.jsx(_e,{size:20}):e.jsx(S.Cloud,{}),children:"Backup herunterladen"}),e.jsx(d,{sx:{mt:4,textAlign:"center"},children:e.jsx(V,{color:"error",onClick:n,startIcon:e.jsx(S.Logout,{}),children:"Abmelden"})}),e.jsx(c,{variant:"caption",display:"block",align:"center",sx:{mt:2,color:"text.secondary"},children:"Version 2.4.2 • Build 20251206"})]})]}),e.jsx(xe,{sx:{position:"fixed",bottom:80,left:0,right:0,zIndex:1e3,p:2,bgcolor:"rgba(0,0,0,0.8)",backdropFilter:"blur(10px)",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"center"},children:e.jsx(V,{variant:"contained",size:"large",startIcon:Xe?e.jsx(_e,{size:20,color:"inherit"}):e.jsx(Is,{}),onClick:Ut,disabled:Xe,sx:{...y.buttonGradient,width:"90%",maxWidth:400,height:50,fontSize:"1rem"},children:Xe?"Speichere...":"Alle Änderungen speichern"})}),e.jsxs(Ls,{open:_t,onClose:()=>Be(!1),PaperProps:y.dialog.paper,children:[e.jsx(Bs,{sx:y.dialog.title.sx,children:"Auszeit planen"}),e.jsxs(Ns,{sx:y.dialog.content.sx,children:[e.jsx(Ds,{sx:{mb:2},children:"Die Auszeit beginnt am gewählten Starttag um 07:30 Uhr und endet am Endtag um 23:00 Uhr."}),e.jsxs(re,{select:!0,fullWidth:!0,label:"Grund",value:G.type,onChange:s=>Se({...G,type:s.target.value}),margin:"dense",children:[e.jsx(Ce,{value:"medical",children:"Medizinisch"}),e.jsx(Ce,{value:"vacation",children:"Urlaub/Reise"}),e.jsx(Ce,{value:"social",children:"Sozial/Besuch"}),e.jsx(Ce,{value:"other",children:"Sonstiges"})]}),e.jsx(re,{fullWidth:!0,label:"Beschreibung",value:G.reason,onChange:s=>Se({...G,reason:s.target.value}),margin:"dense",placeholder:"z.B. Grippe"}),e.jsx(re,{fullWidth:!0,type:"date",label:"Startdatum",InputLabelProps:{shrink:!0},value:G.startDate,onChange:s=>Se({...G,startDate:s.target.value}),margin:"dense"}),e.jsx(re,{fullWidth:!0,type:"date",label:"Enddatum",InputLabelProps:{shrink:!0},value:G.endDate,onChange:s=>Se({...G,endDate:s.target.value}),margin:"dense"})]}),e.jsxs(Ws,{sx:y.dialog.actions.sx,children:[e.jsx(V,{onClick:()=>Be(!1),color:"inherit",children:"Abbrechen"}),e.jsx(V,{onClick:Ot,variant:"contained",sx:y.buttonGradient,children:"Bestätigen"})]})]}),e.jsx(bs,{open:Ne.open,autoHideDuration:4e3,onClose:gt,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx($t,{onClose:gt,severity:Ne.severity,variant:"filled",sx:{width:"100%"},children:Ne.message})})]})}export{Nn as default};
