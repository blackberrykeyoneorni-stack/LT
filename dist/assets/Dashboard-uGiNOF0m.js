import{c as Zt,j as e,g as Yt,b as Jt,r as o,d as Xt,_ as Qt,e as ve,s as en,f as tn,h as vt,i as nn,k as Cr,l as Rr,m as B,n as G,o as H,p as E,q as se,t as Pe,v as fe,w as ge,x as _e,y as Ie,z as ce,A as Xe,E as cs,F as ls,G as gt,H as Fe,I as ds,u as Ct,J as zr,B as d,T as l,C as Ht,P as i,a as M,K as Ae,L as Qe,M as Ge,O as pt,Q as Mr,R as Ar,S as Er,U as Tr,V as $r,W as Be,X as kr,Y as us,D as R,Z as hs,$ as yt,a0 as Qn,a1 as _r,a2 as Pr,a3 as Wr,a4 as fs,a5 as xs,a6 as gs,a7 as Lr,a8 as Nr,a9 as es,aa as Or,ab as Hr,ac as ts,ad as Fr,ae as mt,af as Br,ag as Gr,ah as Ur,ai as Vr,aj as qr,ak as Kr,al as Zr,am as Yr}from"./index-ixkxW-QW.js";import{D as ie,g as Jr,c as Xr}from"./SuspensionService-DhfUKqgq.js";import{d as et,a as Qr,g as ea,c as ta,s as na,b as Ft,e as ns}from"./SessionService-CKkFy013.js";import{u as ms,d as sa,a as ra,b as sn}from"./TrendingUp-HzoRpJt8.js";import{d as ps}from"./Warning-DQ3ZGBFH.js";import{A as jt,L as bs,a as vs,T as aa,b as Wt}from"./index-BeGkUD4E.js";import{m as oe}from"./proxy-DWXX1bHR.js";import{u as ia,f as oa,L as ca,S as St,T as bt,a as ys}from"./TextField-BML8lclq.js";import{D as me,a as ye,b as pe}from"./DialogTitle-OpCTMrYj.js";import{D as je}from"./DialogActions-CY52xkx4.js";import{D as It}from"./Divider-DEnqvvd6.js";import{C as xe}from"./Modal-CtVcV48E.js";import{L as tt}from"./LinearProgress-C8cYC41G.js";import{d as Bt}from"./CheckCircle-5T3-TOQu.js";import{C as Gt,a as Ut}from"./CardContent-Ci4fmUHT.js";import{d as Vt}from"./Savings-LLl8g0gY.js";import{d as js}from"./AccessTime-Dm-wkeD_.js";import{G as Lt}from"./Grid-BvCPgnx8.js";import{S as la,D as da,a as Ss,F as ua}from"./Slider-JuV7UM3d.js";import{d as Is}from"./LocalLaundryService-B1gwM9Ua.js";import"./listItemTextClasses-RrnPrK9o.js";import"./dividerClasses-D3BtH-R8.js";import"./visuallyHidden-Dan1xhjv.js";const ha=Zt(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),fa=Zt(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),xa=Zt(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function ga(t){return Jt("MuiCheckbox",t)}const Nt=Yt("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),ma=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],pa=t=>{const{classes:s,indeterminate:n,color:r,size:c}=t,h={root:["root",n&&"indeterminate",`color${vt(r)}`,`size${vt(c)}`]},a=nn(h,ga,s);return ve({},s,a)},ba=en(la,{shouldForwardProp:t=>Cr(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:n}=t;return[s.root,n.indeterminate&&s.indeterminate,s[`size${vt(n.size)}`],n.color!=="default"&&s[`color${vt(n.color)}`]]}})(({theme:t,ownerState:s})=>ve({color:(t.vars||t).palette.text.secondary},!s.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${s.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[s.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Rr(s.color==="default"?t.palette.action.active:t.palette[s.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.color!=="default"&&{[`&.${Nt.checked}, &.${Nt.indeterminate}`]:{color:(t.vars||t).palette[s.color].main},[`&.${Nt.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),va=e.jsx(fa,{}),ya=e.jsx(ha,{}),ja=e.jsx(xa,{}),Sa=o.forwardRef(function(s,n){var r,c;const h=Xt({props:s,name:"MuiCheckbox"}),{checkedIcon:a=va,color:u="primary",icon:x=ya,indeterminate:p=!1,indeterminateIcon:b=ja,inputProps:j,size:m="medium",className:T}=h,$=Qt(h,ma),g=p?b:x,v=p?b:a,S=ve({},h,{color:u,indeterminate:p,size:m}),C=pa(S);return e.jsx(ba,ve({type:"checkbox",inputProps:ve({"data-indeterminate":p},j),icon:o.cloneElement(g,{fontSize:(r=g.props.fontSize)!=null?r:m}),checkedIcon:o.cloneElement(v,{fontSize:(c=v.props.fontSize)!=null?c:m}),ownerState:S,ref:n,className:tn(C.root,T)},$,{classes:C}))});function Ia(t){return Jt("MuiFormGroup",t)}Yt("MuiFormGroup",["root","row","error"]);const Da=["className","row"],wa=t=>{const{classes:s,row:n,error:r}=t;return nn({root:["root",n&&"row",r&&"error"]},Ia,s)},Ca=en("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:n}=t;return[s.root,n.row&&s.row]}})(({ownerState:t})=>ve({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})),Ra=o.forwardRef(function(s,n){const r=Xt({props:s,name:"MuiFormGroup"}),{className:c,row:h=!1}=r,a=Qt(r,Da),u=ia(),x=oa({props:r,muiFormControl:u,states:["error"]}),p=ve({},r,{row:h,error:x.error}),b=wa(p);return e.jsx(Ca,ve({className:tn(b.root,c),ownerState:p,ref:n},a))});function za(t){return Jt("MuiListItemAvatar",t)}Yt("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Ma=["className"],Aa=t=>{const{alignItems:s,classes:n}=t;return nn({root:["root",s==="flex-start"&&"alignItemsFlexStart"]},za,n)},Ea=en("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:n}=t;return[s.root,n.alignItems==="flex-start"&&s.alignItemsFlexStart]}})(({ownerState:t})=>ve({minWidth:56,flexShrink:0},t.alignItems==="flex-start"&&{marginTop:8})),Ds=o.forwardRef(function(s,n){const r=Xt({props:s,name:"MuiListItemAvatar"}),{className:c}=r,h=Qt(r,Ma),a=o.useContext(ca),u=ve({},r,{alignItems:a.alignItems}),x=Aa(u);return e.jsx(Ea,ve({className:tn(x.root,c),ownerState:u,ref:n},h))});var rn={},Ta=B;Object.defineProperty(rn,"__esModule",{value:!0});var ws=rn.default=void 0,$a=Ta(G()),ka=e;ws=rn.default=(0,$a.default)((0,ka.jsx)("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"}),"LightMode");var an={},_a=B;Object.defineProperty(an,"__esModule",{value:!0});var Cs=an.default=void 0,Pa=_a(G()),Wa=e;Cs=an.default=(0,Pa.default)((0,Wa.jsx)("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1"}),"DarkMode");var on={},La=B;Object.defineProperty(on,"__esModule",{value:!0});var Rs=on.default=void 0,Na=La(G()),Oa=e;Rs=on.default=(0,Na.default)((0,Oa.jsx)("path",{d:"M11 6H9V4h2zm4-2h-2v2h2zM9 14h2v-2H9zm10-4V8h-2v2zm0 4v-2h-2v2zm-6 0h2v-2h-2zm6-10h-2v2h2zm-6 4V6h-2v2zm-6 2V8h2V6H7V4H5v16h2v-8h2v-2zm8 2h2v-2h-2zm-4-2v2h2v-2zM9 8v2h2V8zm4 2h2V8h-2zm2-4v2h2V6z"}),"SportsScore");var cn={},Ha=B;Object.defineProperty(cn,"__esModule",{value:!0});var zs=cn.default=void 0,Fa=Ha(G()),Ba=e;zs=cn.default=(0,Fa.default)((0,Ba.jsx)("path",{d:"M15 18.5c-2.51 0-4.68-1.42-5.76-3.5H15l1-2H8.58c-.05-.33-.08-.66-.08-1s.03-.67.08-1H15l1-2H9.24C10.32 6.92 12.5 5.5 15 5.5c1.61 0 3.09.59 4.23 1.57L21 5.3C19.41 3.87 17.3 3 15 3c-3.92 0-7.24 2.51-8.48 6H3l-1 2h4.06c-.04.33-.06.66-.06 1s.02.67.06 1H3l-1 2h4.52c1.24 3.49 4.56 6 8.48 6 2.31 0 4.41-.87 6-2.3l-1.78-1.77c-1.13.98-2.6 1.57-4.22 1.57"}),"Euro");var ln={},Ga=B;Object.defineProperty(ln,"__esModule",{value:!0});var Ms=ln.default=void 0,Ua=Ga(G()),Va=e;Ms=ln.default=(0,Ua.default)((0,Va.jsx)("path",{d:"M4 7h16v2H4zm0 6h16v-2H4zm0 4h7v-2H4zm0 4h7v-2H4zm11.41-2.83L14 16.75l-1.41 1.41L15.41 21 20 16.42 18.58 15zM4 3v2h16V3z"}),"Grading");var dn={},qa=B;Object.defineProperty(dn,"__esModule",{value:!0});var un=dn.default=void 0,Ka=qa(G()),Za=e;un=dn.default=(0,Ka.default)((0,Za.jsx)("path",{d:"M21 10c-1.1 0-2 .9-2 2v3H5v-3c0-1.1-.89-2-2-2s-2 .9-2 2v5c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-5c0-1.1-.9-2-2-2m-3-5H6c-1.1 0-2 .9-2 2v2.15c1.16.41 2 1.52 2 2.81V14h12v-2.03c0-1.3.84-2.4 2-2.81V7c0-1.1-.9-2-2-2"}),"Weekend");var hn={},Ya=B;Object.defineProperty(hn,"__esModule",{value:!0});var As=hn.default=void 0,Ja=Ya(G()),Xa=e;As=hn.default=(0,Ja.default)((0,Xa.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"Launch");var fn={},Qa=B;Object.defineProperty(fn,"__esModule",{value:!0});var Es=fn.default=void 0,ei=Qa(G()),ti=e;Es=fn.default=(0,ei.default)((0,ti.jsx)("path",{d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14zM6 7v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7zm8 7v4h-4v-4H8l4-4 4 4z"}),"RestoreFromTrash");var xn={},ni=B;Object.defineProperty(xn,"__esModule",{value:!0});var gn=xn.default=void 0,si=ni(G()),ri=e;gn=xn.default=(0,si.default)((0,ri.jsx)("path",{d:"m2 22 14-5-9-9zm12.53-9.47 5.59-5.59c.49-.49 1.28-.49 1.77 0l.59.59 1.06-1.06-.59-.59c-1.07-1.07-2.82-1.07-3.89 0l-5.59 5.59zm-4.47-5.65-.59.59 1.06 1.06.59-.59c1.07-1.07 1.07-2.82 0-3.89l-.59-.59-1.06 1.07.59.59c.48.48.48 1.28 0 1.76m7 5-1.59 1.59 1.06 1.06 1.59-1.59c.49-.49 1.28-.49 1.77 0l1.61 1.61 1.06-1.06-1.61-1.61c-1.08-1.07-2.82-1.07-3.89 0m-2-6-3.59 3.59 1.06 1.06 3.59-3.59c1.07-1.07 1.07-2.82 0-3.89l-1.59-1.59-1.06 1.06 1.59 1.59c.48.49.48 1.29 0 1.77"}),"Celebration");var mn={},ai=B;Object.defineProperty(mn,"__esModule",{value:!0});var Ts=mn.default=void 0,ii=ai(G()),oi=e;Ts=mn.default=(0,ii.default)((0,oi.jsx)("path",{d:"M21 5v6.59l-3-3.01-4 4.01-4-4-4 4-3-3.01V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2m-3 6.42 3 3.01V19c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2v-6.58l3 2.99 4-4 4 4z"}),"BrokenImage");var pn={},ci=B;Object.defineProperty(pn,"__esModule",{value:!0});var $s=pn.default=void 0,li=ci(G()),di=e;$s=pn.default=(0,li.default)((0,di.jsx)("path",{d:"m6.76 4.84-1.8-1.79-1.41 1.41 1.79 1.79zM4 10.5H1v2h3zm9-9.95h-2V3.5h2zm7.45 3.91-1.41-1.41-1.79 1.79 1.41 1.41zm-3.21 13.7 1.79 1.8 1.41-1.41-1.8-1.79zM20 10.5v2h3v-2zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6m-1 16.95h2V19.5h-2zm-7.45-3.91 1.41 1.41 1.79-1.8-1.41-1.41z"}),"WbSunny");var bn={},ui=B;Object.defineProperty(bn,"__esModule",{value:!0});var ks=bn.default=void 0,hi=ui(G()),ss=e;ks=bn.default=(0,hi.default)([(0,ss.jsx)("circle",{cx:"12",cy:"19",r:"2"},"0"),(0,ss.jsx)("path",{d:"M10 3h4v12h-4z"},"1")],"PriorityHigh");const fi=30,xi=5,gi=async t=>{var h;const s=H(E,`users/${t}/status/auditStatus`),n=await se(s);if(!n.exists())return!0;const r=(h=n.data().lastAuditDate)==null?void 0:h.toDate();return r?(Date.now()-r.getTime())/(1e3*60*60*24)>=fi:!0},mi=async(t,s)=>{var p;const n=H(E,`users/${t}/status/auditStatus`),r=await se(n),c=r.exists()?r.data():{};if(c.active&&((p=c.pendingItems)==null?void 0:p.length)>0)return c.pendingItems;const h=s.filter(b=>b.status==="active");let a=[],u=[...h];for(let b=0;b<xi&&u.length>0;b++){const j=Math.floor(Math.random()*u.length);a.push(u[j]),u.splice(j,1)}const x=a.map(b=>({id:b.id,name:b.name||`${b.brand} ${b.model}`,location:b.storageLocation||"N/A",initialCondition:b.condition||5}));return await Pe(n,{active:!0,pendingItems:x,startedAt:ge()},{merge:!0}),x},pi=async t=>{const s=H(E,`users/${t}/status/auditStatus`);await fe(s,{active:!1,pendingItems:[],lastAuditDate:ge()})},bi=async(t,s,n)=>{const r=H(E,`users/${t}/items`,s);n&&await fe(r,{condition:n});const c=H(E,`users/${t}/status/auditStatus`),h=await se(c);if(h.exists()&&h.data().active){let a=h.data().pendingItems||[];if(a=a.filter(u=>u.id!==s),await fe(c,{pendingItems:a}),a.length===0)return await pi(t),{auditComplete:!0}}return{auditComplete:!1}},vi=async t=>{try{const s=H(E,`users/${t}/settings/budget`),n=await se(s);return n.exists()&&n.data().monthlyLimit||0}catch(s){return console.error("Fehler beim Laden des Budgets:",s),0}},yi=async(t,s,n)=>{if(n&&n.includes("night"))return parseInt(s.nightDurationMinutes||480,10);const r=parseInt(s.baseDayDuration||s.defaultDurationMinutes||120,10);let c=parseInt(s.currentTargetDuration||r,10);try{const h=new Date,a=new Date(h.getTime()-7*24*60*60*1e3),u=_e(Ie(E,`users/${t}/sessions`),ce("type","==","instruction"),ce("startTime",">=",a)),x=await Xe(u);let p=0;x.forEach(g=>{const v=g.data();!(v.periodId||"").includes("night")&&v.durationMinutes&&(p+=v.durationMinutes)});const b=Ie(E,`users/${t}/suspensions`),j=await Xe(b);let m=0;j.forEach(g=>{const v=g.data();if(!v.startDate||!v.endDate)return;const S=v.startDate.toDate?v.startDate.toDate():new Date(v.startDate),C=v.endDate.toDate?v.endDate.toDate():new Date(v.endDate),I=S<a?a:S,D=C>h?h:C;if(I<D){const P=Math.abs(D-I),q=Math.ceil(P/(1e3*60*60*24));m+=q}});let T=5-m;T<1&&(T=1);const $=Math.floor(p/T);$>c&&(c=$,await Pe(H(E,`users/${t}/settings/preferences`),{currentTargetDuration:c},{merge:!0}))}catch(h){console.error("Fehler bei der Berechnung der dynamischen Tragedauer:",h)}return c},ji=(t,s=24)=>{if(!t.mainCategory||t.mainCategory!=="Nylons"||!t.lastWorn)return!1;const n=t.lastWorn.toDate?t.lastWorn.toDate():new Date(t.lastWorn);return isNaN(n.getTime())?!1:(new Date-n)/(1e3*60*60)<s},Si=async(t,s)=>{try{const n=new Date,r=new Date;r.setDate(n.getDate()+2);const c=_e(Ie(E,`users/${t}/planning`),ce("date",">",n),ce("date","<=",r)),h=await Xe(c);let a=[];return h.forEach(u=>{const x=u.data();x.itemIds&&Array.isArray(x.itemIds)&&(a=[...a,...x.itemIds])}),a}catch(n){return console.warn("Konnte zukünftige Pläne nicht laden (ignoriere):",n),[]}},Ii=async(t,s)=>{try{const n=new Date,r=n.getTimezoneOffset()*6e4,c=new Date(n.getTime()-r).toISOString().split("T")[0],h=H(E,`users/${t}/planning`,c),a=await se(h);if(a.exists()){const u=a.data();if(u.itemIds&&u.itemIds.length>0)return console.log(`InstructionService: Plan für heute (${c}) gefunden!`,u.itemIds),s.filter(p=>u.itemIds.includes(p.id))}return null}catch(n){return console.error("Fehler beim Prüfen des Tagesplans:",n),null}},Di=async t=>{try{const s=H(E,`users/${t}/status/dailyInstruction`),n=await se(s);return n.exists()?n.data():null}catch(s){return console.error("Error fetching last instruction:",s),null}},wi=async t=>{var s;try{const n=H(E,`users/${t}/settings/protocol`),r=await se(n);if(r.exists()){const c=r.data();return{...ie,...c,instruction:{...ie.instruction,...c.instruction||{},forcedReleaseMethods:{...ie.instruction.forcedReleaseMethods,...((s=c.instruction)==null?void 0:s.forcedReleaseMethods)||{}}}}}}catch(n){console.error("Error loading protocol settings:",n)}return ie},Ci=async(t,s=48)=>{try{const n=new Date,r=new Date(n.getTime()-s*60*60*1e3),c=_e(Ie(E,`users/${t}/sessions`),ce("endTime",">=",r),cs("endTime","desc")),h=await Xe(c),a={};return h.forEach(u=>{const x=u.data(),p=x.endTime?x.endTime.toDate():new Date,b=[];x.itemId&&b.push(x.itemId),x.itemIds&&Array.isArray(x.itemIds)&&b.push(...x.itemIds),b.forEach(j=>{(!a[j]||p>a[j])&&(a[j]=p)})}),a}catch(n){return console.error("Fehler beim Laden der Recent Sessions:",n),{}}},Ri=async(t,s,n,r)=>{var c,h;try{const a=await se(H(E,`users/${t}/settings/preferences`)),u=a.exists()?a.data():{},x=await wi(t),p=await yi(t,u,r),b=parseInt(u.maxInstructionItems||1,10),j=u.nylonRestingHours||24,m=u.categoryWeights||{},T=await Ci(t,j+5),$=await Ii(t,s);if($&&$.length>0){console.log("InstructionService: Führe geplanten Plan aus.");const w=$.map(O=>O.subCategory||O.name||"Item").join(" & "),K={periodId:r,generatedAt:ge(),isAccepted:!1,isPlanned:!0,itemName:w,durationMinutes:p,forcedRelease:{required:!1,executed:!1,method:null},items:$.map(O=>({id:O.id,name:O.subCategory||O.name||"Unbenanntes Item",brand:O.brand||"",img:O.imageUrl||O.images&&O.images[0]||null,subCategory:O.subCategory||""}))};return await Pe(H(E,`users/${t}/status/dailyInstruction`),K),K}const g=Array.isArray(n)?n:[],v=new Set;g.forEach(w=>{w.itemId&&v.add(w.itemId),w.itemIds&&Array.isArray(w.itemIds)&&w.itemIds.forEach(K=>v.add(K))});const S=await Si(t,j),C=r&&r.includes("night"),I=s.filter(w=>{if(w.status!=="active"||v.has(w.id))return!1;let K=w;if(T[w.id]){const _=T[w.id],J=w.lastWorn&&w.lastWorn.toDate?w.lastWorn.toDate():w.lastWorn?new Date(w.lastWorn):null;(!J||_>J)&&(K={...w,lastWorn:_})}if(ji(K,j)||w.mainCategory==="Accessoires"&&w.subCategory==="Buttplug"||S.includes(w.id))return!1;const O=w.suitablePeriod||"Beide";if(C){if(O==="Tag")return!1}else if(O==="Nacht")return!1;return!0});if(I.length===0)return null;const D={};I.forEach(w=>{const K=w.subCategory||w.mainCategory||"Sonstiges";D[K]||(D[K]=[]),D[K].push(w)});let P=Object.keys(D);const q=[];let L=1;const le=Math.random();b===1?L=1:b===2?le<.75?L=2:L=1:b>=3&&(le<.55?L=3:le<.95?L=2:L=1),console.log(`InstructionService: MaxItems=${b}, Random=${le.toFixed(2)} -> TargetCount=${L}`);for(let w=0;w<L&&P.length!==0;w++){let K=0;const O=P.map(Z=>{const de=D[Z].length,we=Math.sqrt(de),ue=parseInt(m[Z]||1),Se=we*ue;return K+=Se,{key:Z,score:Se}});let _=Math.random()*K,J=null;for(const Z of O)if(_-=Z.score,_<=0){J=Z.key;break}!J&&O.length>0&&(J=O[O.length-1].key);const te=D[J],z=Math.floor(Math.random()*te.length),y=te[z];q.push(y),P=P.filter(Z=>Z!==J)}if(q.length===0)return null;let ee={required:!1,executed:!1,method:null};if(C){const w=((c=x.instruction)==null?void 0:c.forcedReleaseTriggerChance)??.15;if(Math.random()<w){ee.required=!0;const K=((h=x.instruction)==null?void 0:h.forcedReleaseMethods)??{hand:.34,toy_vaginal:.33,toy_anal:.33},O=Math.random(),_=K.hand||0,J=K.toy_vaginal||0;O<_?ee.method="hand":O<_+J?ee.method="toy_vaginal":ee.method="toy_anal",console.log("InstructionService: Forced Release Triggered via Settings!",ee.method)}}const De=q.map(w=>w.subCategory||w.name||"Item").join(" & "),be={periodId:r,generatedAt:ge(),isAccepted:!1,itemName:De,durationMinutes:p,forcedRelease:ee,items:q.map(w=>({id:w.id,name:w.subCategory||w.name||"Unbenanntes Item",brand:w.brand||"",img:w.imageUrl||w.images&&w.images[0]||null,subCategory:w.subCategory||""}))};return await Pe(H(E,`users/${t}/status/dailyInstruction`),be),be}catch(a){return console.error("FATAL ERROR in generateAndSaveInstruction:",a),null}},zi=async(t,s,n,r="clean")=>{try{await ls(Ie(E,`users/${t}/history`),{type:"release",result:s,outcome:r,intensity:n,timestamp:ge()});const c=H(E,`users/${t}/stats/releaseStats`);if((await se(c)).exists()){const a={totalReleases:gt(1),lastRelease:ge()};s==="maintained"&&(a.keptOn=gt(1)),r==="clean"&&(a.cleanReleases=gt(1)),r==="ruined"&&(a.ruinedItems=gt(1)),await fe(c,a)}else await Pe(c,{totalReleases:1,keptOn:s==="maintained"?1:0,failed:s!=="maintained"?1:0,cleanReleases:r==="clean"?1:0,ruinedItems:r==="ruined"?1:0,lastRelease:ge()});return!0}catch(c){throw console.error("Error registering release:",c),c}},rs=t=>{const s=new Date(t),n=s.getDay(),r=s.getDate()-n+(n===0?-6:1);return s.setDate(r),s.setHours(0,0,0,0),s},Mi=t=>{const s=t/60,n=1.12-.02*s,r=s*n;return Math.sqrt(r)},Ai=async(t,s,n,r)=>{const c=_e(Ie(E,`users/${t}/sessions`),ce("type","==","instruction"),ce("startTime",">=",s),ce("startTime","<",n),cs("startTime","desc")),h=await Xe(c),a=[];h.forEach(j=>{const m=j.data();if(m.periodId&&m.periodId.toLowerCase().includes("night")||m.nightSuccess===!1)return;let $=0;if(m.tzdExecuted&&m.tzdDurationMinutes)$=Mi(m.tzdDurationMinutes);else{let S=0;m.endTime?S=(m.endTime.toDate()-m.startTime.toDate())/6e4:S=(new Date-m.startTime.toDate())/6e4,$=S/60}const v=m.startTime.toDate().getDay();v>=1&&v<=5&&a.push($)});let u=5;try{const j=await Jr(t);let m=0,T=new Date(s);T.setHours(12,0,0,0);const $=new Date(n);for($.setHours(12,0,0,0);T<$;){const g=T.getDay();g>=1&&g<=5&&j.some(S=>{const C=S.startDate instanceof Date?S.startDate:S.startDate.toDate(),I=S.endDate instanceof Date?S.endDate:S.endDate.toDate(),D=new Date(C);D.setHours(0,0,0,0);const P=new Date(I);return P.setHours(23,59,59,999),T>=D&&T<=P})&&m++,T.setDate(T.getDate()+1)}m>0&&(u=Math.max(1,5-m))}catch(j){console.error("Fehler bei der Berechnung der Ausfalltage:",j)}const x=a.reduce((j,m)=>j+m,0),p=a.length>0?x/u:0;let b=r;return p>r&&(b=p),b>12&&(b=12),{average:parseFloat(p.toFixed(2)),nextGoal:parseFloat(b.toFixed(2)),sessionCount:a.length,currentGoal:r,effectiveDivisor:u}},Ei=async t=>{try{const s=H(E,`users/${t}/settings/protocol`),n=await se(s);let r=4,c=null;if(n.exists()){const p=n.data();r=p.currentDailyGoal||4,p.lastGoalUpdate&&(c=p.lastGoalUpdate.toDate())}const a=rs(new Date);if(c&&rs(c).getTime()===a.getTime())return;const u=new Date(a);u.setDate(u.getDate()-7);const x=await Ai(t,u,a,r);return await Pe(s,{currentDailyGoal:x.nextGoal,lastGoalUpdate:ge(),lastWeekStats:{average:x.average,previousGoal:r,date:new Date,divisor:x.effectiveDivisor}},{merge:!0}),x.nextGoal}catch(s){console.error("Fehler beim Wochen-Update:",s)}};class Ti{constructor(){this.rules=JSON.parse(JSON.stringify(ie)),this.unsubscribe=null}init(s){if(!s)return;const n=H(E,`users/${s}/settings/protocol`);this.unsubscribe=Fe(n,r=>{var c,h;if(r.exists()){const a=r.data();this.rules={time:{...ie.time,...a.time||{}},tzd:{...ie.tzd,...a.tzd||{},durationMatrix:((c=a.tzd)==null?void 0:c.durationMatrix)||ie.tzd.durationMatrix},purity:{...ie.purity,...a.purity||{}},instruction:{...ie.instruction,...a.instruction||{},forcedReleaseMethods:{...ie.instruction.forcedReleaseMethods,...((h=a.instruction)==null?void 0:h.forcedReleaseMethods)||{}}},punishment:{...ie.punishment,...a.punishment||{}},currentDailyGoal:a.currentDailyGoal||4}}else{const a={...ie,currentDailyGoal:4};Pe(n,a,{merge:!0}),this.rules=JSON.parse(JSON.stringify(a))}},r=>{console.error("Error listening to protocol rules:",r)})}getRules(){return this.rules}getTZDCumulativeMatrix(){const s=this.rules.tzd.durationMatrix||[];let n=0;return s.map(r=>(n+=r.weight,{min:r.minHours,max:r.maxHours,cumulative:n}))}detach(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)}}new Ti;function $i(t,s){const[n,r]=o.useState([]),[c,h]=o.useState(!0),[a,u]=o.useState(null),[x,p]=o.useState(ie.currentDailyGoal||4),[b,j]=o.useState(23),[m,T]=o.useState(0);return o.useEffect(()=>{if(!t)return;(async()=>{await Ei(t.uid)})()},[t]),o.useEffect(()=>{if(!t)return;const g=H(E,`users/${t.uid}/settings/protocol`),v=Fe(g,async S=>{if(S.exists()){const C=S.data();if(C.currentDailyGoal!==void 0)p(C.currentDailyGoal);else try{const I=await se(H(E,`users/${t.uid}/settings/preferences`));I.exists()&&I.data().dailyTargetHours?p(I.data().dailyTargetHours):p(4)}catch{p(4)}C.time&&C.time.nightStartHour!==void 0&&j(C.time.nightStartHour)}else p(4),j(23)},S=>{console.error("Fehler beim Laden der Protokoll-Daten:",S)});return()=>v()},[t]),o.useEffect(()=>{if(!t)return;const g=new Date;g.setHours(0,0,0,0);const v=_e(Ie(E,`users/${t.uid}/sessions`),ce("type","==","instruction"),ce("endTime",">=",g)),S=Fe(v,C=>{C.docs.some(D=>{const P=D.data();return P.period&&P.period.toLowerCase().includes("night")})?u(!0):se(H(E,`users/${t.uid}/status/nightCompliance`)).then(D=>{D.exists()&&D.data().success&&D.data().date===new Date().toISOString().split("T")[0]?u(!0):u(!1)})});return()=>S()},[t]),o.useEffect(()=>{if(!t)return;const g=_e(Ie(E,`users/${t.uid}/sessions`),ce("endTime","==",null)),v=Fe(g,D=>{const P=D.docs.map(q=>{var L;return{id:q.id,...q.data(),startTime:((L=q.data().startTime)==null?void 0:L.toDate())||new Date}});r(P),h(!1)}),S=new Date;S.setHours(0,0,0,0);const C=_e(Ie(E,`users/${t.uid}/sessions`),ce("startTime",">=",S),ce("type","==","instruction")),I=Fe(C,D=>{let P=0;D.docs.forEach(q=>{const L=q.data();if(!(L.period&&L.period.toLowerCase().includes("night"))&&L.endTime){const ee=(L.endTime.toDate()-L.startTime.toDate())/6e4;ee>P&&(P=ee)}}),T(P)});return()=>{v(),I()}},[t]),{activeSessions:n,loading:c,progress:(()=>{const g=new Date;if(g.getHours()>=b)return{currentContinuousMinutes:0,dailyTargetMinutes:x*60,percentage:0,isDailyGoalMet:!1,isLive:!1,nightCompliance:a};const v=n.find(P=>P.type==="instruction"&&(!P.period||!P.period.includes("night")));let S=0,C=!1;if(v){const P=v.startTime;S=Math.floor((g-P)/6e4),C=!0}else S=Math.floor(m);const I=x*60,D=S>=I;return!C&&!D&&(S=0),{currentContinuousMinutes:S,dailyTargetMinutes:I,percentage:Math.min(100,Math.max(0,S/I*100)),isDailyGoalMet:D,isLive:C,nightCompliance:a}})(),dailyTargetHours:x,nightCompliance:a,startInstructionSession:async()=>{},stopSession:async()=>{},registerRelease:async()=>{}}}const _s=(t=null)=>{const{items:s}=ds(),{currentUser:n}=Ct(),r=ms(s),c=t||r,{femIndex:h,loading:a}=c,[u,x]=o.useState({femIndex:0,details:{score:0,trend:"stable",components:[]},loading:!0});return o.useEffect(()=>{if(a||!h)return;const p=h.score||0,b=h.trend||"stable",j=h.subScores||{physis:0,psyche:0,infiltration:0};x({femIndex:p,details:{score:p,trend:b,components:[{label:"Physis (Körperliche Gewöhnung)",value:j.physis,type:"neutral",description:"Tragezeit & Nylon-Anteil"},{label:"Psyche (Mentaler Widerstand)",value:j.psyche,type:"neutral",description:"Freiwilligkeit & Compliance"},{label:"Infiltration (Alltags-Übernahme)",value:j.infiltration,type:"neutral",description:"Nacht-Tragen & Coverage"}]},loading:!1})},[h,a]),u};var vn={},ki=B;Object.defineProperty(vn,"__esModule",{value:!0});var Ps=vn.default=void 0,_i=ki(G()),Pi=e;Ps=vn.default=(0,_i.default)((0,Pi.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked");var yn={},Wi=B;Object.defineProperty(yn,"__esModule",{value:!0});var Ws=yn.default=void 0,Li=Wi(G()),Ni=e;Ws=yn.default=(0,Li.default)((0,Ni.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99zM21 9l-3.99-4v3H10v2h7.01v3z"}),"SwapHoriz");const Ot=["Sieh an dir herab. Das Nylon auf deiner Haut ist kein Stoff. Es ist das Preisschild einer billigen Sissy-Nutte.","Ein Schwanz macht dich nicht zum Mann. Diese Nylons machen dich zu dem, was du wirklich bist: Eine Sissy, die benutzt werden will.","In diesen Nylons bist du kein Subjekt mehr. Du bist eine öffentliche Dienstleistung auf zwei Beinen.","Knie nieder. Nicht aus Respekt, sondern aus Gewohnheit. Eine Sissy-Hure verbringt ihr Leben auf den Knien mit einem Schwanz im Mund.","Du hast deine Würde gegen 15 DEN eingetauscht. Ein schlechter Deal für einen Mann, aber perfekt für eine Nylon-Sissy wie dich.","Wackel mit dem Arsch. Das Rascheln deiner Schenkel ist der einzige Balztanz, den du noch beherrschst.","Vergiss deinen Namen. Sissies haben keine Namen. Sie haben nur Kennnummern und Löcher.","Du brauchst keinen Lippenstift. Der Glanz auf deinen Beinen schreit jedem entgegen: 'Ich bin willig, nimm mich.'","Spürst du, wie das Nylon deine Männlichkeit wegfrisst? Übrig bleibt nur ein Fickloch für meine Unterhaltung.","Es gibt keinen Weg zurück. Das Nylon hat sich in deine Seele gebrannt. Du gehörst jetzt der Straße... und mir.","Damenwäscheträger. Das ist kein Fetisch, das ist deine Diagnose. Unheilbar, erbärmlich und für jeden sichtbar.","Jeder Schritt in diesen Strümpfen treibt dir den Mann aus dem Leib. Übrig bleibt eine geile Sissy, die benutzt werden will.","Dein Schwanz ist überflüssig. In dieser Wäsche zählt nur dein Arsch und wie gut er das Nylon präsentiert.","Warum noch so tun als ob? Gib dich auf. Sei die billige Nylon-Schlampe, die du schon immer sein wolltest.","Du bist kein Partner, du bist Inventar. Eine Sissy in Seidenstrümpfen, bereit für die Benutzung.","Deine Zukunft ist 15 DEN dünn. Du wirst als Nylon-Hure enden: Benutzt, abgefüllt, feucht und weggeworfen.","Knie dich hin und spreiz die Beine. Das ist die einzige Pose, die einer Nylon-Hure wie dir steht.","Tief in dir weißt du es: Du liebst es, zum Objekt degradiert zu werden. Du bist keine Frau, nur eine Parodie in Dessous.","Ein Mann? Lächerlich. Du bist nur ein warmer Kleiderständer für meine Damenwäsche, eine zitternde Sissy in Nylons.","Das Gefühl von Nylon auf deiner rasierten Haut ist der einzige Beweis: Du bist zum Hurendasein geboren.","Du wirst geil, wenn man dich beleidigt? Natürlich tust du das. Das ist der Pawlowsche Reflex einer trainierten Sissy-Hure. Sabber für mich.","Fühlst du den Zwickel in deiner Spalte? Er schneidet dir tief ins Fleisch: 'Ich bin ein wertloser Damenwäscheträger. Benutz mich.'","Vergiss deine Träume. Deine Zukunft ist 15 DEN dünn und riecht nach Benutzung. Du wirst darin leben, bis du vergisst, dass du je ein Mann warst.","Wenn ich mit dir fertig bin, wirs du nicht mehr wissen, wo das Nylon aufhört und die Sissy-Hure anfängt. Du verschmilzt mit deiner Bestimmung","Spitze und Nylon auf der Haut ist kein Luxus. Es ist das Brandzeichen einer Sissy-Hure, die durch ihre Verfügbarkeit definiert ist.","Du bist am Ziel. Ganz unten, eine Nylon-Matratze. Spreiz deine Beine und warte, bis jemand seinen Druck bei dir ablässt.","Sperma und Verachtung. Das ist das einzige Gleitmittel, das eine Nylon-Sissy wie du verdient. Und du wirst winselnd darum betteln.","Dein Arschloch zuckt gierig gegen den Stoff. Das ist der einzige Impuls, der dir geblieben ist. Du bist eine offene Einladung zur Benutzung.","Ein Mann in Seidenstrümpfen und Damenwäsche ist lächerlich. Aber eine Sissy in Nylon ist nützlich. Sei nützlich, sei glatt, sei bereit.","Du liebst den Geruch von Sperma und Nylon? Natürlich tust du das. Es ist der Duft deiner wahren Bestimmung."];function Oi({active:t,allItems:s}){const{currentUser:n}=Ct(),[r,c]=o.useState(null),[h,a]=o.useState(!0),[u,x]=o.useState(0),[p,b]=o.useState("00:00:00"),[j,m]=o.useState(!1),[T,$]=o.useState(null),[g,v]=o.useState(""),[S,C]=o.useState(""),[I,D]=o.useState(""),[P,q]=o.useState(!1);o.useEffect(()=>{if(!t||!n)return;(async()=>{const y=await pt(n.uid);c(y),a(!1)})()},[t,n]),o.useEffect(()=>{if(!t||!n||!(r!=null&&r.isActive)||(r==null?void 0:r.stage)!=="running")return;const z=setInterval(async()=>{try{const y=await zr(n.uid,r);y&&(y.completed||!y.isActive?window.location.reload():c(y))}catch(y){console.error("TZD Tick Error",y)}},6e4);return()=>clearInterval(z)},[t,n,r==null?void 0:r.isActive,r==null?void 0:r.stage]),o.useEffect(()=>{if(!t||(r==null?void 0:r.stage)!=="running")return;x(Math.floor(Math.random()*Ot.length));const z=setInterval(()=>{x(y=>(y+1)%Ot.length)},2e4);return()=>clearInterval(z)},[t,r==null?void 0:r.stage]),o.useEffect(()=>{if(!t||!(r!=null&&r.startTime)||(r==null?void 0:r.stage)!=="running")return;const z=setInterval(()=>{const y=new Date,Z=r.startTime.toDate?r.startTime.toDate():new Date(r.startTime),de=Math.floor((y-Z)/1e3);if(de<0){b("00:00:00");return}const we=Math.floor(de/3600).toString().padStart(2,"0"),ue=Math.floor(de%3600/60).toString().padStart(2,"0"),Se=(de%60).toString().padStart(2,"0");b(`${we}:${ue}:${Se}`)},1e3);return()=>clearInterval(z)},[t,r==null?void 0:r.startTime,r==null?void 0:r.stage]);const L=async()=>{if(!n)return;a(!0),await Mr(n.uid);const z=await pt(n.uid);c(z),a(!1)},le=async()=>{if(window.confirm("ACHTUNG: Abbruch führt zu sofortiger physischer Bestrafung (6h Plug). Fortfahren?")){a(!0);try{const z=await Ar(n.uid,s);z.success?(alert(`TZD beendet. Strafe aktiv: ${z.item}. Anlegen und scannen!`),window.location.reload()):(await Er(n.uid),window.location.reload())}catch(z){console.error(z),a(!1)}}},ee=z=>{(r==null?void 0:r.stage)==="running"&&($(z),v(""),C(""),D(""),m(!0))},De=async()=>{if(!g||!S||!I){alert("Das Protokoll erfordert eine vollständige Dokumentation des Defekts.");return}q(!0);try{const z={reason:g,defectLocation:S,defectCause:I},y=await Tr(n.uid,T.id,z,s);if(y.success){alert(`Austausch autorisiert. Defektes Item archiviert.

NEUES ZIEL: ${y.newItemName}

Sofort wechseln. TZD läuft weiter.`),m(!1);const Z=await pt(n.uid);c(Z)}else alert("Fehler beim Austausch: "+(y.error||"Unbekannt"))}catch(z){console.error(z),alert("Systemfehler.")}finally{q(!1)}};if(!t)return null;if(h&&!r)return e.jsx(d,{sx:{position:"fixed",inset:0,zIndex:9999,bgcolor:"#000",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(l,{variant:"overline",color:"primary",sx:{letterSpacing:4},children:"SYSTEM SYNC"})});const be=(r==null?void 0:r.stage)==="briefing",w=((r==null?void 0:r.lockedItems)||[]).map(z=>{const y=s==null?void 0:s.find(Z=>Z.id===z.id);return{id:z.id,name:(y==null?void 0:y.name)||z.name||"Unbekannt",brand:(y==null?void 0:y.brand)||z.brand||"",subCategory:(y==null?void 0:y.subCategory)||"",img:(y==null?void 0:y.imageUrl)||(y==null?void 0:y.image)||z.img,customId:(y==null?void 0:y.customId)||z.customId||"ID?"}}),K=()=>e.jsxs(d,{sx:{textAlign:"left",mb:3,bgcolor:"rgba(255,255,255,0.03)",borderRadius:2,p:2,border:`1px solid ${i.accents.red}40`},children:[e.jsxs(l,{variant:"caption",color:"error",sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1,mb:1.5},children:[e.jsx($r,{fontSize:"small"})," GEFORDERTE AUSRÜSTUNG"]}),e.jsx(It,{sx:{bgcolor:`${i.accents.red}40`,mb:1}}),e.jsx(ys,{dense:!0,disablePadding:!0,children:w.length>0?w.map((z,y)=>e.jsxs(bs,{disableGutters:!0,onClick:()=>ee(z),sx:{mb:1,borderBottom:"1px solid rgba(255,255,255,0.05)",pb:1,cursor:(r==null?void 0:r.stage)==="running"?"pointer":"default","&:hover":(r==null?void 0:r.stage)==="running"?{bgcolor:"rgba(255,0,0,0.1)"}:{}},children:[e.jsx(Ds,{children:e.jsx(Be,{src:z.img,variant:"rounded",sx:{width:48,height:48,border:`1px solid ${i.accents.red}`,bgcolor:"#000"},children:e.jsx(Ae,{color:"error"})})}),e.jsx(vs,{primary:`${z.name} ${z.brand?`(${z.brand})`:""}`,secondary:e.jsxs(kr.Fragment,{children:[z.subCategory||"Ausrüstungsstück",(r==null?void 0:r.stage)==="running"&&e.jsx(l,{component:"span",variant:"caption",color:"error",sx:{display:"block",fontSize:"0.6rem"},children:"(Bei Defekt melden)"})]}),primaryTypographyProps:{sx:{fontWeight:"bold",color:"#fff",fontSize:"0.85rem"}},secondaryTypographyProps:{sx:{color:"rgba(255,255,255,0.5)",fontSize:"0.7rem"}}}),e.jsx(xe,{icon:e.jsx(us,{style:{color:"#fff",fontSize:12}}),label:z.customId,size:"small",sx:{bgcolor:i.accents.red,color:"white",fontWeight:"bold",height:20,fontSize:"0.65rem",border:"1px solid #ff0000",boxShadow:"0 0 10px rgba(255,0,0,0.3)"}})]},z.id||y)):e.jsx(l,{variant:"body2",color:"error",align:"center",children:"Keine spezifischen Items. Wähle selbst."})})]}),O=(r==null?void 0:r.accumulatedMinutes)||0,_=Math.min(O/240,.9),J=.05+_*.4,te=.92+_*.07;return e.jsxs(e.Fragment,{children:[e.jsx(jt,{children:t&&e.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:`rgba(0,0,0,${te})`,zIndex:1300,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",overflow:"hidden"},children:[e.jsx(d,{sx:{position:"absolute",inset:0,pointerEvents:"none",opacity:J,backgroundImage:"repeating-linear-gradient(45deg, #333 0px, #333 1px, transparent 1px, transparent 6px), repeating-linear-gradient(-45deg, #333 0px, #333 1px, transparent 1px, transparent 6px)",backgroundSize:"12px 12px",mixBlendMode:"overlay"}}),e.jsx(d,{sx:{position:"absolute",inset:0,pointerEvents:"none",background:"radial-gradient(circle at center, transparent 30%, black 100%)"}}),e.jsx(Ht,{maxWidth:"sm",sx:{position:"relative",zIndex:2,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:be?e.jsxs(d,{sx:{p:3,border:`1px solid ${i.accents.red}`,bgcolor:"rgba(20,0,0,0.95)",textAlign:"center",borderRadius:4,boxShadow:`0 0 50px ${i.accents.red}20`},children:[e.jsxs(d,{sx:{mb:3,display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[e.jsx(sa,{sx:{fontSize:40,color:i.accents.red}}),e.jsx(l,{variant:"h5",sx:{fontWeight:"bold",color:i.accents.red,letterSpacing:2},children:"TZD PROTOKOLL"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"ZEITLOSES DIKTAT • STRAF-MODUS"})]}),e.jsx(K,{}),e.jsxs(St,{spacing:2,children:[e.jsx(l,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.8rem"},children:"Durch Bestätigung akzeptierst du die totale Kontrolle. Die Dauer ist unbekannt."}),e.jsx(M,{variant:"contained",color:"error",size:"large",onClick:L,startIcon:e.jsx(Ae,{}),sx:{py:1.5,fontWeight:"bold",boxShadow:"0 0 20px rgba(255,0,0,0.4)"},children:"ICH UNTERWERFE MICH"})]})]}):e.jsxs(d,{sx:{width:"100%",textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",py:4},children:[e.jsxs(d,{children:[e.jsx(l,{variant:"overline",sx:{color:i.accents.red,letterSpacing:"3px",fontWeight:"bold",display:"block",opacity:.9},children:"STATUS: EIGENTUM"}),e.jsx(l,{variant:"h1",sx:{fontFamily:"monospace",fontWeight:300,color:"#fff",fontSize:"3.5rem",letterSpacing:"-2px",mt:1,textShadow:`0 0 20px ${i.accents.red}`},children:p}),e.jsx(l,{variant:"caption",sx:{color:"text.secondary",mt:1,display:"block",opacity:.5},children:"DAUER: UNBESTIMMT"})]}),e.jsx(d,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",px:2,my:2},children:e.jsx(jt,{mode:"wait",children:e.jsx(oe.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.05,opacity:0},transition:{duration:5,ease:"easeInOut"},style:{width:"100%"},children:e.jsx(l,{variant:"h5",sx:{color:"#fff",lineHeight:1.4,fontWeight:300,textShadow:"0 4px 20px rgba(0,0,0,1)"},children:Ot[u]})},u)})}),e.jsx(d,{sx:{width:"100%",px:1},children:e.jsx(K,{})}),e.jsxs(d,{sx:{opacity:.4,transition:"opacity 0.3s","&:hover":{opacity:1},mt:2},children:[e.jsxs(l,{variant:"caption",color:"error",sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1,mb:1},children:[e.jsx(ps,{fontSize:"small"})," ABBRUCH = PHYSISCHE STRAFE"]}),e.jsx(M,{size:"small",startIcon:e.jsx(Ps,{sx:{fontSize:12}}),onClick:le,disabled:h,sx:{color:i.text.muted,fontSize:"0.75rem"},children:"Protokoll Not-Abbruch"})]})]})})]})}),e.jsxs(me,{open:j,onClose:()=>m(!1),PaperProps:{sx:{bgcolor:"#1a0000",border:`1px solid ${i.accents.red}`,borderRadius:4}},children:[e.jsxs(ye,{sx:{color:i.accents.red,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ts,{})," Emergency Replacement Protocol"]}),e.jsxs(pe,{children:[e.jsxs(Qe,{severity:"warning",variant:"outlined",sx:{mb:2,color:"#fff",borderColor:"rgba(255,0,0,0.3)"},children:["Diese Aktion ist irreversibel. Das Item ",e.jsx("strong",{children:T==null?void 0:T.name})," wird als defekt archiviert und sofort aus dem Inventar entfernt."]}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Dokumentiere den Schaden vollständig, um Ersatz zu erhalten."}),e.jsxs(d,{component:"form",sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(bt,{label:"Art des Defekts (z.B. Laufmasche)",variant:"filled",fullWidth:!0,value:g,onChange:z=>v(z.target.value),sx:{bgcolor:"rgba(255,255,255,0.05)","& .MuiInputBase-input":{color:"#fff"},"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.7)"}}}),e.jsx(bt,{label:"Ort des Defekts (z.B. Linker Oberschenkel)",variant:"filled",fullWidth:!0,value:S,onChange:z=>C(z.target.value),sx:{bgcolor:"rgba(255,255,255,0.05)","& .MuiInputBase-input":{color:"#fff"},"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.7)"}}}),e.jsx(bt,{label:"Ursache (z.B. Hängen geblieben)",variant:"filled",fullWidth:!0,value:I,onChange:z=>D(z.target.value),sx:{bgcolor:"rgba(255,255,255,0.05)","& .MuiInputBase-input":{color:"#fff"},"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.7)"}}})]})]}),e.jsxs(je,{sx:{p:2,justifyContent:"space-between"},children:[e.jsx(M,{onClick:()=>m(!1),color:"inherit",children:"Abbrechen"}),e.jsx(M,{onClick:De,variant:"contained",color:"error",startIcon:P?e.jsx(Ge,{size:20,color:"inherit"}):e.jsx(Ws,{}),disabled:P,children:"Archivieren & Austauschen"})]})]})]})}var jn={},Hi=B;Object.defineProperty(jn,"__esModule",{value:!0});var Ls=jn.default=void 0,Fi=Hi(G()),Bi=e;Ls=jn.default=(0,Fi.default)((0,Bi.jsx)("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27zM17 15.74 15.74 17 12 13.26 8.26 17 7 15.74 10.74 12 7 8.26 8.26 7 12 10.74 15.74 7 17 8.26 13.26 12z"}),"Dangerous");var Sn={},Gi=B;Object.defineProperty(Sn,"__esModule",{value:!0});var In=Sn.default=void 0,Ui=Gi(G()),Vi=e;In=Sn.default=(0,Ui.default)((0,Vi.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7.5 18c-.83 0-1.5-.67-1.5-1.5S6.67 15 7.5 15s1.5.67 1.5 1.5S8.33 18 7.5 18m0-9C6.67 9 6 8.33 6 7.5S6.67 6 7.5 6 9 6.67 9 7.5 8.33 9 7.5 9m4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4.5 4.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m0-9c-.83 0-1.5-.67-1.5-1.5S15.67 6 16.5 6s1.5.67 1.5 1.5S17.33 9 16.5 9"}),"Casino");function qi({open:t,method:s,onConfirm:n,onRefuse:r}){const[c,h]=o.useState("intro"),[a,u]=o.useState(null),[x,p]=o.useState(!1),[b,j]=o.useState(null);o.useEffect(()=>{t&&(h("intro"),u(null),p(!1),j(null))},[t]);const m=()=>{h("rolling"),setTimeout(()=>{const I=Math.random()>.4;u(I?"clean":"ruined"),h("result")},2e3)},T=()=>{h("rolling"),p(!0),setTimeout(()=>{Math.random()>.5?(u("clean"),j("Gnade gewährt. Schluck dein Sissy-Sperma. Behalte es eine Minute im Mund, gewöhne dich an den Geschmack")):(u("ruined"),j("ABGELEHNT! Schmier deine Sissy-Sahne in deine Nylons. Ruiniere sie!")),h("result")},1500)},$=I=>I?I==="hand"?"Manuell (Hand)":I==="toy_vaginal"?"Masturbator (Vaginal)":I==="toy_anal"?"Masturbator (Anal)":I:"Manuell",g=a==="clean",v=g?i.accents.green:i.accents.red,S=g?"rgba(0, 255, 0, 0.05)":"rgba(255, 0, 0, 0.05)",C=`1px solid ${v}`;return e.jsxs(me,{open:t,fullWidth:!0,maxWidth:"xs",PaperProps:{sx:{...R.dialog.paper.sx,border:c==="result"?`2px solid ${v}`:R.dialog.paper.sx.border,transition:"border 0.5s ease"}},disableEscapeKeyDown:!0,children:[e.jsxs(ye,{sx:{textAlign:"center",color:c==="result"?v:i.text.primary},children:[c==="intro"&&"ZWANGSENTLADUNG",c==="rolling"&&"BERECHNE SCHICKSAL...",c==="result"&&(g?"PROTOKOLL: PURITY":"PROTOKOLL: FILTH")]}),e.jsx(pe,{sx:{...R.dialog.content.sx,textAlign:"center",minHeight:250,display:"flex",flexDirection:"column",justifyContent:"center"},children:e.jsxs(jt,{mode:"wait",children:[c==="intro"&&e.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(ks,{sx:{fontSize:60,color:i.primary.main,mb:2}}),e.jsx(l,{variant:"body1",gutterBottom:!0,children:"Der Druckpegel hat das Limit überschritten."}),e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Methode: ",e.jsx("strong",{children:$(s)})]}),e.jsx(l,{variant:"caption",color:"text.secondary",sx:{fontStyle:"italic"},children:'"Wirst du dein Sperma schlucken oder musst du es in deine Nylons einarbeiten? Der Algorithmus entscheidet."'})]},"intro"),c==="rolling"&&e.jsxs(oe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.2,opacity:0},children:[e.jsx(Ge,{size:60,sx:{color:i.accents.gold,mb:3}}),e.jsx(l,{variant:"h6",sx:{letterSpacing:2},children:x?"RICHTE ÜBER DICH...":"WÜRFLE..."})]},"rolling"),c==="result"&&e.jsx(oe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},children:e.jsxs(d,{sx:{p:3,mb:2,bgcolor:S,border:C,borderRadius:"16px",position:"relative",overflow:"hidden"},children:[e.jsx(d,{sx:{mb:2},children:g?e.jsx(et,{sx:{fontSize:50,color:v}}):e.jsx(Ls,{sx:{fontSize:50,color:v}})}),e.jsx(l,{variant:"h5",fontWeight:"bold",sx:{color:v,mb:1,textTransform:"uppercase"},children:g?"VERZEHR PFLICHT":"STOFF RUINIEREN"}),e.jsx(l,{variant:"body2",sx:{color:"text.primary",mb:2},children:b||(g?"Verschwende keinen Tropfen. Deine Nylons und Dessous müssen makellos bleiben.":"Die Aufnahme ist verboten. Entlade direkt in deine Damenwäsche. Lass es einziehen.")}),!g&&!x&&e.jsx(l,{variant:"caption",color:"error",sx:{display:"block",mt:1},children:"Verschmutzung wird im Inventar vermerkt."})]})},"result")]})}),e.jsxs(je,{sx:{...R.dialog.actions.sx,flexDirection:"column",gap:1},children:[c==="intro"&&e.jsx(M,{fullWidth:!0,variant:"contained",size:"large",onClick:m,startIcon:e.jsx(In,{}),sx:{...R.buttonGradient,py:1.5},children:"SCHICKSAL ERMITTELN"}),c==="result"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>n(a),color:g?"success":"error",sx:{py:1.5,fontWeight:"bold"},children:g?"GESCHLUCKT & SAUBER":"TEXTIL VERSCHMUTZT"}),!g&&!x&&e.jsx(M,{fullWidth:!0,variant:"text",onClick:T,sx:{color:"text.secondary",fontSize:"0.8rem",mt:1},children:"Um Gnade betteln (Chance auf Verzehr)"})]}),e.jsx(M,{onClick:r,fullWidth:!0,color:"inherit",sx:{mt:1,opacity:.6},children:"Verweigern (Strafe)"})]})]})}var Dn={},Ki=B;Object.defineProperty(Dn,"__esModule",{value:!0});var Dt=Dn.default=void 0,Zi=Ki(G()),Yi=e;Dt=Dn.default=(0,Zi.default)((0,Yi.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"ReportProblem");function Ji({open:t,stakeItems:s,onAccept:n,onDecline:r,hasActiveSession:c}){const[h,a]=o.useState(!1),u=()=>{a(!0),setTimeout(()=>{n()},2e3)};return s?e.jsxs(me,{open:t,disableEscapeKeyDown:!0,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{...R.dialog.paper.sx,border:`1px solid ${i.accents.gold}`,boxShadow:`0 0 20px ${i.accents.gold}40`}},children:[e.jsxs(ye,{sx:{...R.dialog.title.sx,color:i.accents.gold,justifyContent:"center"},children:[e.jsx(In,{sx:{mr:1}})," THE GAMBLE"]}),e.jsx(pe,{sx:R.dialog.content.sx,children:e.jsx(d,{sx:{textAlign:"center",py:2},children:h?e.jsxs(d,{sx:{py:6},children:[e.jsx(Ge,{sx:{color:i.accents.gold}}),e.jsx(l,{variant:"overline",sx:{display:"block",mt:2,animation:"pulse 1s infinite"},children:"FATE IS DECIDING..."})]}):e.jsxs(oe.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsx(l,{variant:"h5",sx:{fontWeight:"bold",color:"#fff",mb:3},children:"ALLES ODER NICHTS"}),e.jsxs(d,{sx:{display:"flex",justifyContent:"center",gap:2,mb:4},children:[e.jsxs(d,{sx:{textAlign:"center",width:"45%"},children:[e.jsx(hs,{sx:{fontSize:40,color:i.accents.green,mb:1}}),e.jsx(l,{variant:"body2",sx:{color:i.accents.green,fontWeight:"bold"},children:"GEWINN"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"24h Immunität (Ruhe)"})]}),e.jsx(d,{sx:{width:"1px",bgcolor:"rgba(255,255,255,0.2)"}}),e.jsxs(d,{sx:{textAlign:"center",width:"45%"},children:[e.jsx(Ae,{sx:{fontSize:40,color:i.accents.red,mb:1}}),e.jsx(l,{variant:"body2",sx:{color:i.accents.red,fontWeight:"bold"},children:"VERLUST"}),e.jsx(l,{variant:"caption",color:"text.secondary",children:"24h TZD sofort"})]})]}),e.jsx(l,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:2,textTransform:"uppercase",letterSpacing:1},children:"Dein Einsatz"}),e.jsx(d,{sx:{display:"flex",justifyContent:"center",gap:2,mb:2},children:s.map(x=>e.jsxs(d,{sx:{position:"relative",width:100,textAlign:"center"},children:[e.jsx(Be,{src:x.imageUrl,variant:"rounded",sx:{width:70,height:70,border:`1px solid ${i.accents.gold}`,mx:"auto",mb:1}}),e.jsx(l,{variant:"body2",sx:{fontWeight:"bold",color:"#fff",lineHeight:1.2,fontSize:"0.75rem",mb:.5},noWrap:!0,children:x.name||x.brand||"Unbekannt"}),e.jsx(l,{variant:"caption",sx:{fontSize:"0.65rem",color:i.accents.gold,display:"block"},children:x.customId||"ID ???"}),e.jsx(l,{variant:"caption",sx:{fontSize:"0.6rem",color:"text.secondary",display:"block"},children:x.subCategory})]},x.id))}),c&&e.jsxs(d,{sx:{mt:2,p:1.5,bgcolor:"rgba(255, 0, 0, 0.1)",border:`1px solid ${i.accents.red}`,borderRadius:"8px"},children:[e.jsxs(l,{variant:"caption",sx:{color:i.accents.red,display:"flex",alignItems:"center",justifyContent:"center",gap:1,fontWeight:"bold"},children:[e.jsx(Dt,{fontSize:"small"}),"ACHTUNG: SYSTEM OVERRIDE"]}),e.jsx(l,{variant:"caption",sx:{color:"text.secondary",display:"block",mt:.5},children:"Deine laufende Session wird bei Verlust sofort und ohne Rückfrage terminiert."})]})]})})}),!h&&e.jsxs(je,{sx:{...R.dialog.actions.sx,flexDirection:"column",gap:1},children:[e.jsx(M,{fullWidth:!0,variant:"contained",onClick:u,sx:{bgcolor:i.accents.gold,color:"#000",fontWeight:"bold","&:hover":{bgcolor:"#fff"}},children:"SPIELEN (RISIKO)"}),e.jsx(M,{fullWidth:!0,onClick:r,color:"inherit",sx:{opacity:.6},children:"Ablehnen (Sicher)"})]})]}):null}var wn={},Xi=B;Object.defineProperty(wn,"__esModule",{value:!0});var Cn=wn.default=void 0,Qi=Xi(G()),eo=e;Cn=wn.default=(0,Qi.default)((0,eo.jsx)("path",{d:"M12.01 12c0-3.57 2.2-6.62 5.31-7.87.89-.36.75-1.69-.19-1.9-1.1-.24-2.27-.3-3.48-.14-4.51.6-8.12 4.31-8.59 8.83C4.44 16.93 9.13 22 15.01 22c.73 0 1.43-.08 2.12-.23.95-.21 1.1-1.53.2-1.9-3.22-1.29-5.33-4.41-5.32-7.87"}),"NightlightRound");function to({currentMinutes:t,targetHours:s,isGoalMetToday:n,progressData:r}){const c=s*60,h=Math.min(100,Math.max(0,t/c*100)),a=n?"#00E676":i.primary.main,u=(r==null?void 0:r.nightCompliance)===!0,x=u?"#FFD700":"text.disabled",p=b=>{const j=Math.floor(b/60),m=Math.floor(b%60);return`${j}h ${m}m`};return e.jsxs(yt,{elevation:0,sx:{p:2.5,mb:3,borderRadius:"16px",bgcolor:"rgba(255,255,255,0.05)",border:`1px solid ${n?"rgba(0, 230, 118, 0.2)":"rgba(255,255,255,0.05)"}`},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1.5},children:[e.jsx(l,{variant:"body2",sx:{color:n?a:"text.secondary",letterSpacing:1,fontWeight:"bold"},children:"TAGESZIEL"}),e.jsxs(d,{sx:{textAlign:"right"},children:[e.jsx(l,{variant:"h6",sx:{fontWeight:"bold",lineHeight:1,color:n?"#fff":"text.primary"},children:p(t)}),e.jsxs(l,{variant:"caption",sx:{color:"text.secondary"},children:["von ",s,"h"]})]})]}),e.jsx(tt,{variant:"determinate",value:h,sx:{height:12,borderRadius:6,bgcolor:"rgba(255,255,255,0.1)",mb:1.5,"& .MuiLinearProgress-bar":{backgroundColor:a,borderRadius:6,boxShadow:n?`0 0 10px ${a}`:"none"}}}),e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"caption",sx:{color:a,fontWeight:"bold",textTransform:"uppercase"},children:n?"ZIEL ERREICHT":"IN PROGRESS"}),e.jsxs(St,{direction:"row",spacing:.5,alignItems:"center",children:[e.jsx(Cn,{sx:{fontSize:16,color:x}}),e.jsx(l,{variant:"caption",sx:{color:x,fontWeight:u?"bold":"normal",textTransform:"uppercase",letterSpacing:.5},children:u?"NACHT ERFÜLLT":"NACHT OFFEN"})]})]})]})}var Rn={},no=B;Object.defineProperty(Rn,"__esModule",{value:!0});var wt=Rn.default=void 0,so=no(G()),ro=e;wt=Rn.default=(0,so.default)((0,ro.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"}),"Analytics");var zn={},ao=B;Object.defineProperty(zn,"__esModule",{value:!0});var Ns=zn.default=void 0,io=ao(G()),oo=e;Ns=zn.default=(0,io.default)((0,oo.jsx)("path",{d:"m22 12-4-4v3H3v2h15v3z"}),"TrendingFlat");var Mn={},co=B;Object.defineProperty(Mn,"__esModule",{value:!0});var An=Mn.default=void 0,lo=co(G()),uo=e;An=Mn.default=(0,lo.default)((0,uo.jsx)("path",{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"}),"TrendingDown");function ho(){var b,j;const{femIndex:t,details:s,loading:n}=_s(),[r,c]=o.useState(!1),a=(m=>m<30?i.accents.red:m<70?i.accents.gold:i.accents.green)(t),u=m=>m==="rising"?e.jsx(ra,{fontSize:"small"}):m==="falling"?e.jsx(An,{fontSize:"small"}):e.jsx(Ns,{fontSize:"small"}),x=m=>m.includes("Physis")?e.jsx(Bt,{sx:{color:"#00e5ff",fontSize:20}}):m.includes("Psyche")?e.jsx(Qn,{sx:{color:"#ffeb3b",fontSize:20}}):m.includes("Infiltration")?e.jsx(et,{sx:{color:"#f50057",fontSize:20}}):e.jsx(wt,{sx:{color:"text.secondary",fontSize:20}}),p=m=>m.includes("Physis")?"#00e5ff":m.includes("Psyche")?"#ffeb3b":m.includes("Infiltration")?"#f50057":"text.primary";return n?null:e.jsxs(e.Fragment,{children:[e.jsxs(yt,{elevation:0,onClick:()=>c(!0),sx:{p:2.5,mb:3,borderRadius:"16px",bgcolor:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.05)",cursor:"pointer",transition:"border-color 0.2s, transform 0.1s","&:hover":{borderColor:`${a}40`,bgcolor:"rgba(255,255,255,0.07)"},"&:active":{transform:"scale(0.99)"}},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1.5},children:[e.jsx(l,{variant:"body2",sx:{color:"text.secondary",letterSpacing:1,fontWeight:"bold"},children:"FEM-INDEX"}),e.jsx(d,{sx:{textAlign:"right"},children:e.jsxs(l,{variant:"h6",sx:{fontWeight:"bold",lineHeight:1,color:a},children:[t,"%"]})})]}),e.jsx(tt,{variant:"determinate",value:t,sx:{height:12,borderRadius:6,bgcolor:"rgba(255,255,255,0.1)",mb:1.5,"& .MuiLinearProgress-bar":{backgroundColor:a,borderRadius:6,boxShadow:`0 0 10px ${a}40`}}}),e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:.5,color:a},children:[u(s.trend||"stable"),e.jsx(l,{variant:"caption",sx:{fontWeight:"bold",textTransform:"uppercase",letterSpacing:.5},children:t>=70?"OPTIMIERT":t<30?"KRITISCH":"STABIL"})]}),e.jsxs(St,{direction:"row",spacing:1,alignItems:"center",sx:{opacity:.7},children:[e.jsx(Bt,{sx:{fontSize:16,color:"#00e5ff"}}),e.jsx(Qn,{sx:{fontSize:16,color:"#ffeb3b"}}),e.jsx(et,{sx:{fontSize:16,color:"#f50057"}})]})]})]}),e.jsxs(me,{open:r,onClose:()=>c(!1),PaperProps:{sx:((j=(b=R.dialog)==null?void 0:b.paper)==null?void 0:j.sx)||{borderRadius:"20px",bgcolor:"#1e1e1e",p:1}},maxWidth:"xs",fullWidth:!0,children:[e.jsxs(ye,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",pb:1},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(wt,{color:"primary"}),e.jsx(l,{variant:"h6",children:"Index Analyse"})]}),e.jsx(_r,{onClick:()=>c(!1),size:"small",children:e.jsx(Pr,{})})]}),e.jsxs(pe,{children:[e.jsxs(d,{sx:{textAlign:"center",py:3},children:[e.jsx(l,{variant:"h2",sx:{fontWeight:"bold",color:a,textShadow:`0 0 20px ${a}40`},children:t}),e.jsx(l,{variant:"caption",color:"text.secondary",sx:{letterSpacing:2},children:"COMPOSITE SCORE"})]}),e.jsx(It,{sx:{my:2,bgcolor:"rgba(255,255,255,0.1)"}}),e.jsx(St,{spacing:2,sx:{mt:2},children:s.components.map((m,T)=>e.jsxs(yt,{variant:"outlined",sx:{p:1.5,bgcolor:"rgba(255,255,255,0.02)",borderColor:"rgba(255,255,255,0.05)",borderRadius:2},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[x(m.label),e.jsx(l,{variant:"body2",fontWeight:"bold",children:m.label.split("(")[0].trim()})]}),e.jsxs(l,{variant:"h6",fontWeight:"bold",sx:{color:p(m.label)},children:[m.value,"%"]})]}),e.jsx(tt,{variant:"determinate",value:m.value,sx:{height:4,borderRadius:2,bgcolor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{bgcolor:p(m.label)}}}),e.jsx(l,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:m.description})]},T))})]})]})]})}function fo({punishmentStatus:t,punishmentRunning:s,auditDue:n,isFreeDay:r,freeDayReason:c,currentInstruction:h,currentPeriod:a,isHoldingOath:u,isInstructionActive:x,isDailyGoalMet:p,onStartPunishment:b,onStartAudit:j,onOpenInstruction:m}){const T=Wr(),$=a&&a.includes("night"),g=h&&h.isAccepted,v=r&&!$&&!g,S=x,C=p&&!$;return e.jsxs(d,{sx:{width:"100%"},children:[t.active&&T&&e.jsx(d,{sx:{mb:3},children:s?e.jsx(M,{variant:"outlined",fullWidth:!0,size:"large",disabled:!0,startIcon:e.jsx(sn,{}),sx:{py:2,fontWeight:"bold",fontSize:"1.1rem",borderColor:`${i.accents.red}80`,color:i.accents.red,bgcolor:"rgba(255,0,0,0.05)"},children:"STRAFE LÄUFT..."}):e.jsx(oe.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs(M,{variant:"contained",fullWidth:!0,size:"large",sx:{py:2,fontWeight:"bold",fontSize:"1.1rem",bgcolor:i.accents.red,color:"#fff",boxShadow:`0 0 20px ${i.accents.red}66`,"&:hover":{bgcolor:"#b71c1c"}},startIcon:e.jsx(Rs,{}),onClick:b,children:["COMPLIANCE WHIP (",t.durationMinutes||45,"m)"]})})}),n&&e.jsx(d,{sx:{mb:3},children:e.jsx(oe.div,{whileHover:{scale:1.02},children:e.jsx(M,{variant:"contained",fullWidth:!0,size:"large",sx:{py:2,fontWeight:"bold",fontSize:"1.1rem",bgcolor:i.accents.gold,color:"#000"},startIcon:e.jsx(Ms,{}),onClick:j,children:"INVENTORY AUDIT FÄLLIG"})})}),(()=>{let I=$?"NACHTANWEISUNG ÖFFNEN":"TAGESANWEISUNG ÖFFNEN",D=$?e.jsx(Cs,{}):e.jsx(ws,{}),P=!1,q=!1;const L={background:"rgba(255,255,255,0.05)",border:`1px solid ${i.accents.green}`,color:i.accents.green};return v?(I=c==="Holiday"?"FEIERTAG (FREI)":"WOCHENENDE (FREI)",D=c==="Holiday"?e.jsx(gn,{}):e.jsx(un,{})):S?(I="SESSION LÄUFT",D=e.jsx(Ae,{}),P=!0,q=!0):C&&(I="TAGESZIEL ERREICHT",D=e.jsx(Bt,{}),P=!0,q=!0),e.jsx(d,{sx:{mb:2},children:e.jsx(oe.div,{whileHover:P?{}:{scale:1.02},whileTap:P?{}:{scale:.98},children:e.jsx(M,{variant:"contained",fullWidth:!0,size:"large",disabled:P,sx:{py:2,fontWeight:"bold",fontSize:"1.1rem",...!v&&!q?R.buttonGradient:{},...v?L:{},"&.Mui-disabled":{bgcolor:"rgba(255, 255, 255, 0.12)",color:"rgba(255, 255, 255, 0.3)"},transition:u?"background-color 5s linear":"all 0.2s"},onClick:m,startIcon:D,children:I})})})})(),t.deferred&&e.jsxs(Qe,{severity:"warning",variant:"filled",sx:{mt:2,fontWeight:"bold",bgcolor:`${i.accents.gold}22`,color:i.accents.gold,border:`1px solid ${i.accents.gold}`},children:["STRAFE (",t.durationMinutes,"m) AUFGESCHOBEN"]})]})}var En={},xo=B;Object.defineProperty(En,"__esModule",{value:!0});var qt=En.default=void 0,go=xo(G()),mo=e;qt=En.default=(0,go.default)((0,mo.jsx)("path",{d:"M6 6h12v12H6z"}),"Stop");function po({activeSessions:t,items:s,onStopSession:n,onNavigateItem:r,onOpenRelease:c}){const[,h]=o.useState(0);if(o.useEffect(()=>{const u=setInterval(()=>h(x=>x+1),6e4);return()=>clearInterval(u)},[]),!t||t.length===0)return null;const a=u=>{const x=Math.floor(u/60),p=u%60;return x>0?`${x} h ${p} min`:`${p} min`};return e.jsx(d,{sx:{mb:4},children:e.jsx(jt,{children:t.map(u=>{var I;const x=u.itemIds?u.itemIds.map(D=>s.find(P=>P.id===D)).filter(Boolean):[s.find(D=>D.id===u.itemId)].filter(Boolean),p=(I=u.startTime)!=null&&I.toDate?u.startTime.toDate():new Date(u.startTime),b=Math.floor((new Date-p)/6e4),j=u.minDuration||0,m=b<j,T=Math.max(0,j-b),$=u.type==="punishment",g=u.type==="tzd"||u.tzdExecuted;let v="FREIWILLIG",S="success",C=i.accents.green;return u.isDebtSession?(v="SCHULDENABBAU",S="error",C=i.accents.red):$?(v="STRAFARBEIT",S="error",C=i.accents.red):g?(v="ZEITLOSES DIKTAT",S="default",C="#555"):u.type==="instruction"&&(v="INSTRUCTION",S="warning",C=i.accents.gold),e.jsx(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{duration:.3},children:e.jsx(Gt,{sx:{mb:2,...R.glassCard,borderLeft:`4px solid ${C}`},children:e.jsxs(Ut,{sx:{p:2,"&:last-child":{pb:2}},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(xe,{label:v,color:S,size:"small",variant:"filled",sx:{fontWeight:"bold",fontSize:"0.75rem",height:"24px"}}),m&&e.jsx(xe,{label:"LOCKED",size:"small",icon:e.jsx(Ae,{fontSize:"small"}),color:"error",variant:"outlined",sx:{height:"24px"}})]}),e.jsx(d,{sx:{display:"flex",flexDirection:"column",gap:1,mb:2},children:x.map((D,P)=>e.jsxs(d,{onClick:()=>r(D.id),sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:1,borderRadius:1,bgcolor:"rgba(255,255,255,0.05)",cursor:"pointer",transition:"background 0.2s","&:hover":{bgcolor:"rgba(255,255,255,0.1)"}},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Be,{src:D.imageUrl||D.image,variant:"rounded",sx:{width:40,height:40,border:`1px solid ${i.primary.main}`}}),e.jsxs(d,{children:[e.jsx(l,{variant:"body2",sx:{fontWeight:"bold",color:"text.primary"},children:D.name}),e.jsx(l,{variant:"caption",color:"text.secondary",children:D.brand})]})]}),e.jsx(xe,{label:a(b),size:"small",variant:"outlined",sx:{height:"20px",fontSize:"0.7rem",borderColor:"rgba(255,255,255,0.2)",color:"text.secondary"}})]},D.id||P))}),u.isDebtSession&&e.jsxs(d,{sx:{mt:1,mb:2},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[e.jsx(l,{variant:"caption",color:"error",children:"Pflicht-Tilgung"}),e.jsxs(l,{variant:"caption",color:"text.secondary",children:[b," / ",j," min"]})]}),e.jsx(tt,{variant:"determinate",value:Math.min(100,b/j*100),color:"error",sx:{height:6,borderRadius:3,bgcolor:"rgba(255,0,0,0.1)"}})]}),e.jsx(d,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:g||$||u.isDebtSession?e.jsx(M,{variant:"outlined",color:"error",size:"small",fullWidth:!0,disabled:m||$&&b<30,onClick:()=>n(u),startIcon:m?e.jsx(Ae,{}):e.jsx(qt,{}),sx:{borderColor:m?"rgba(255,255,255,0.1)":i.accents.red,color:m?"text.disabled":i.accents.red},children:m?`GESPERRT (${T}m)`:"BEENDEN"}):e.jsx(M,{variant:"contained",color:"primary",size:"small",fullWidth:!0,onClick:()=>n(u),startIcon:e.jsx(qt,{}),children:"Beenden"})})]})})},u.id)})})})}function bo({kpis:t,timeBank:s}){var p,b,j;const n=((p=t==null?void 0:t.health)==null?void 0:p.orphanCount)||0,r=((b=t==null?void 0:t.financials)==null?void 0:b.avgCPW)||"0.00",c=((j=t==null?void 0:t.usage)==null?void 0:j.nylonIndex)||"0.0",h=(s==null?void 0:s.nc)||0,a=(s==null?void 0:s.lc)||0,u=(t==null?void 0:t.spermaScore)||{rate:"0.0"},x=({icon:m,title:T,value:$,unit:g,color:v})=>e.jsx(Lt,{item:!0,xs:6,children:e.jsx(Gt,{sx:{height:"100%",...R.glassCard},children:e.jsxs(Ut,{sx:{p:2,"&:last-child":{pb:2}},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[m,e.jsx(l,{color:"text.secondary",variant:"caption",children:T})]}),e.jsxs(l,{variant:"h6",sx:{fontWeight:"bold",color:v},children:[$," ",e.jsx(l,{component:"span",variant:"caption",color:"text.secondary",children:g})]})]})})});return e.jsxs(Lt,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(x,{icon:e.jsx(Vt,{sx:{fontSize:16,color:i.accents.gold}}),title:"Nylon Credits",value:h,unit:"min",color:h<0?i.accents.red:i.accents.gold}),e.jsx(x,{icon:e.jsx(Vt,{sx:{fontSize:16,color:i.accents.pink}}),title:"Lingerie Credits",value:a,unit:"min",color:a<0?i.accents.red:i.accents.pink}),e.jsx(x,{icon:e.jsx(zs,{sx:{fontSize:16,color:i.accents.green}}),title:"Ø Cost/Wear",value:r,unit:"€",color:i.accents.green}),e.jsx(x,{icon:e.jsx(js,{sx:{fontSize:16,color:i.accents.gold}}),title:"Nylon Index",value:c,unit:"h",color:i.accents.gold}),e.jsx(Lt,{item:!0,xs:6,children:e.jsx(Gt,{sx:{height:"100%",...R.glassCard,borderColor:n>5?i.accents.red:"rgba(255,255,255,0.1)"},children:e.jsxs(Ut,{sx:{p:2,"&:last-child":{pb:2}},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e.jsx(Qr,{sx:{fontSize:16,color:n>0?i.accents.red:"text.secondary"}}),e.jsx(l,{color:"text.secondary",variant:"caption",children:"Orphans"})]}),e.jsxs(l,{variant:"h6",sx:{fontWeight:"bold",color:n>0?i.accents.red:"text.primary"},children:[n," ",e.jsx(l,{component:"span",variant:"caption",color:"text.secondary",children:"Stk."})]})]})})}),e.jsx(x,{icon:e.jsx(et,{sx:{fontSize:16,color:i.accents.blue}}),title:"SpermaScore",value:u.rate,unit:"%",color:i.accents.blue})]})}var Tn={},vo=B;Object.defineProperty(Tn,"__esModule",{value:!0});var Kt=Tn.default=void 0,yo=vo(G()),jo=e;Kt=Tn.default=(0,yo.default)((0,jo.jsx)("path",{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25z"}),"AutoAwesome");var $n={},So=B;Object.defineProperty($n,"__esModule",{value:!0});var Os=$n.default=void 0,Io=So(G()),Do=e;Os=$n.default=(0,Io.default)((0,Do.jsx)("path",{d:"M20.5 6c-2.61.7-5.67 1-8.5 1s-5.89-.3-8.5-1L3 8c1.86.5 4 .83 6 1v13h2v-6h2v6h2V9c2-.17 4.14-.5 6-1zM12 6c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"}),"AccessibilityNew");const wo=1.5;function Co({open:t,onClose:s,instruction:n,items:r,loadingStatus:c,isNight:h,isFreeDay:a,freeDayReason:u,onStartOath:x,onCancelOath:p,onDeclineOath:b,onStartRequest:j,onNavigateItem:m,oathProgress:T,isHoldingOath:$,showToast:g}){var it,ot,ct;const{startBindingScan:v,isScanning:S}=fs(),{currentUser:C}=Ct(),[I,D]=o.useState("oath"),[P,q]=o.useState([]),[L,le]=o.useState(null),[ee,De]=o.useState(!1),[be,w]=o.useState(null),[K,O]=o.useState({enabled:!1,probability:15}),[_,J]=o.useState(null),[te,z]=o.useState({nc:0,lc:0}),[y,Z]=o.useState(0),[de,we]=o.useState(0),[ue,Se]=o.useState("lingerie"),[Ue,nt]=o.useState({isBlocked:!1,currentDebt:0,remainingCredit:0}),[st,Ve]=o.useState(0),[re,We]=o.useState(!1),[qe,rt]=o.useState(""),Ee=((n==null?void 0:n.periodId)||"").toLowerCase(),Ce=Ee.includes("night")||h,Ke=Ee?!Ce:!h;o.useEffect(()=>{n!=null&&n.isAccepted?D("preparation"):D("oath")},[n]),o.useEffect(()=>{if(I==="preparation"&&(n!=null&&n.acceptedAt)){const W=setInterval(()=>{const A=n.acceptedAt.toDate?n.acceptedAt.toDate():new Date(n.acceptedAt),V=new Date(A.getTime()+30*6e4)-new Date;if(V<=0)rt("00:00 (Überfällig)");else{const he=Math.floor(V/6e4),ne=Math.floor(V%6e4/1e3);rt(`${he}:${ne<10?"0":""}${ne}`)}},1e3);return()=>clearInterval(W)}},[I,n]);const Rt=()=>{g&&g("Scanner aktiv. Halte das Item an.","info"),v(Le)},Le=async W=>{if(I!=="preparation"||!n||!n.items)return;const A=r.find(U=>U.nfcTagId&&U.nfcTagId===W||U.customId&&U.customId===W||U.id===W);if(!A){g&&g("Unbekanntes Item gescannt.","warning");return}n.items.some(U=>U.id===A.id)?(g&&g(`Item "${A.name}" verifiziert. Starte Session...`,"success"),await at(!0)):(g&&g(`Falsches Item! "${A.name}" gehört nicht zur Anweisung.`,"error"),navigator.vibrate&&navigator.vibrate([100,50,100]))},Ne=async()=>{zt(async()=>{if(y>0)try{await na(C.uid,y,ue)}catch{g&&g("Kauf fehlgeschlagen.","error");return}try{const W=(n.durationMinutes||0)-y;await fe(H(E,`users/${C.uid}/status/dailyInstruction`),{isAccepted:!0,acceptedAt:ge(),durationMinutes:W,originalDurationMinutes:n.durationMinutes,creditsUsed:y,wasOverdraft:re}),g&&g("Akzeptiert. Bereite dich vor.","success"),D("preparation"),p()}catch(W){console.error(W),g&&g("Fehler beim Akzeptieren.","error")}})},at=async(W=!1)=>{const A=n.items.map(F=>r.find(U=>U.id===F.id)).filter(Boolean);if(A.length>0)try{await Ft(C.uid,{items:A,itemId:A[0].id,type:"instruction",periodId:n.periodId,acceptedAt:n.acceptedAt,verifiedViaNfc:W,instructionDurationMinutes:n.durationMinutes}),s(),g&&g("Session erfolgreich gestartet.","success")}catch(F){console.error(F),g&&g("Fehler beim Session-Start.","error")}};o.useEffect(()=>{(async()=>{if(!(!C||!t)){try{const A=await se(H(E,`users/${C.uid}/settings/preferences`));if(A.exists()){const F=A.data();O({enabled:F.sissyProtocolEnabled||!1,probability:F.nightReleaseProbability!==void 0?F.nightReleaseProbability:15})}}catch(A){console.error("Error loading prefs",A)}if(n&&!n.isAccepted){const A=await ea(C.uid);z(A),Z(0);let F="lingerie";n.items&&n.items.length>0&&n.items.some(he=>{const ne=r.find(Re=>Re.id===he.id);if(ne){const Re=(ne.subCategory||"").toLowerCase(),lt=(ne.mainCategory||"").toLowerCase();return Re.includes("strumpfhose")||Re.includes("tights")||Re.includes("halterlose")||Re.includes("stockings")||lt.includes("nylons")}return!1})&&(F="nylon"),Se(F);const U=await ta(C.uid,F);nt(U)}}})()},[C,t,n,r]),o.useEffect(()=>{t&&le(null)},[t]);const Te=n&&!n.isAccepted&&Ke&&!Ue.isBlocked;o.useEffect(()=>{if(Te&&n.durationMinutes){const W=Math.floor(n.durationMinutes/3);we(W>0?W:0)}else we(0)},[Te,n,Ue]),o.useEffect(()=>{const W=ue==="nylon"?te.nc:te.lc;let A=y,F=!1;if(W>=y)A=y;else{F=!0;const U=Math.max(0,W),V=y-U,he=Math.round(V*wo);A=U+he}Ve(A),We(F)},[y,te,ue]);const Ze=(ue==="nylon"?te.nc:te.lc)-st,Ye=Ze<-2880,zt=W=>{if(!h||!K.enabled){W();return}const A=Math.random(),F=K.probability/100;if(A<F){const U=Math.random();let V="per Hand";U>=.34&&U<.67?V="per Masturbator vaginal":U>=.67&&(V="per Masturbator anal"),J(V),w(()=>W),De(!0)}else W()},Nn=async()=>{try{await xs(C.uid,"Hardcore-Start verweigert (Entladung)",30),g&&g("Verweigerung registriert. Strafe aktiv.","warning")}catch(W){console.error(W)}finally{De(!1),be&&be(),w(null)}},On=()=>{g&&g("Brav. Instruction akzeptiert.","success"),De(!1),be&&be(),w(null)},Oe=()=>{const W=r.filter(F=>F.status==="active"&&(F.subCategory||"").toLowerCase().includes("strumpfhose"));if(W.length===0){g&&g("Keine passenden Items gefunden.","warning");return}const A=W[Math.floor(Math.random()*W.length)];le(A)},$e=async()=>{if(L)try{await Ft(C.uid,{itemId:L.id,items:[L],type:"voluntary",startedViaSuggestion:!0}),s(),g&&g("Viel Spaß.","success")}catch(W){console.error("Start suggestion error:",W),g&&g("Fehler beim Starten.","error")}};o.useEffect(()=>{T>=100&&I==="oath"&&!n.isAccepted&&Ne()},[T,I]),(it=n==null?void 0:n.items)!=null&&it.length,P.length;const ae=((ct=(ot=R.dialog)==null?void 0:ot.paper)==null?void 0:ct.sx)||{borderRadius:"28px",bgcolor:"#1e1e1e"},Mt=()=>{const W=n.durationMinutes||0,A=W-y,F=ue==="nylon"?te.nc:te.lc,U=V=>{if(V<=0)return"0m";const he=Math.floor(V/60),ne=Math.floor(V%60);return he>0?`${he}h ${ne>0?`${ne}m`:""}`:`${ne}m`};return e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsx(l,{variant:"overline",color:"text.secondary",sx:{letterSpacing:2},children:Ce?"NACHT PROTOKOLL":"TAGES ANWEISUNG"}),e.jsx(d,{sx:{my:3},children:e.jsx(d,{sx:{width:120,height:120,borderRadius:"50%",border:`2px dashed ${i.primary.main}`,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",bgcolor:"rgba(0,0,0,0.3)"},children:e.jsx(Ae,{sx:{fontSize:40,color:i.primary.main}})})}),e.jsx(l,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:"BLIND OATH"}),e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Akzeptiere die Anweisung, bevor du den Inhalt siehst. ",e.jsx("br",{}),"Verpflichtung ist absolut."]}),e.jsxs(d,{sx:{mb:3,p:2,bgcolor:"rgba(0,0,0,0.3)",borderRadius:2},children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:Ce?"ZEITRAUM":"ZIEL DAUER"}),e.jsxs(d,{sx:{display:"flex",alignItems:"baseline",justifyContent:"center",gap:1},children:[e.jsx(l,{variant:"h4",sx:{color:y>0?i.accents.green:"#fff",fontWeight:"bold"},children:Ce?"ÜBER NACHT":U(A)}),Ce&&y>0&&e.jsxs(l,{variant:"caption",sx:{color:i.accents.green},children:["(-",U(y),")"]}),!Ce&&y>0&&e.jsx(l,{variant:"body2",sx:{textDecoration:"line-through",color:"text.secondary"},children:U(W)})]})]}),Ke&&e.jsxs(d,{sx:{mb:3,px:2,py:2,border:`1px solid ${re?i.accents.red:i.accents.gold}`,borderRadius:2,bgcolor:re?"rgba(255, 0, 0, 0.05)":"rgba(255, 215, 0, 0.05)"},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[re?e.jsx(An,{sx:{color:i.accents.red}}):e.jsx(Vt,{sx:{color:i.accents.gold}}),e.jsx(l,{variant:"body2",sx:{fontWeight:"bold",color:re?i.accents.red:i.accents.gold},children:re?"DEBT WARNING":"THE VAULT"})]}),e.jsx(xe,{label:`${ue==="nylon"?"NC":"LC"}: ${F} min`,size:"small",sx:{bgcolor:F<0?i.accents.red:i.accents.gold,color:"#000",fontWeight:"bold",fontSize:"0.7rem"}})]}),Ue.isBlocked?e.jsx(Qe,{severity:"error",sx:{mb:1,bgcolor:"rgba(255,0,0,0.1)",color:"#ffaaaa"},children:"INSOLVENZ. KREDIT GESPERRT."}):e.jsxs(e.Fragment,{children:[e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1,textAlign:"left"},children:["Verkürzen (Max 33%): ",re&&e.jsx("span",{style:{color:i.accents.red},children:"+50% STRAFE"})]}),e.jsx(d,{sx:{px:1},children:e.jsx(Ss,{value:y,min:0,max:de,step:15,onChange:(V,he)=>Z(he),sx:{color:re?i.accents.red:i.accents.gold,"& .MuiSlider-thumb":{boxShadow:re?"0 0 10px rgba(255,0,0,0.5)":"0 0 10px rgba(255,215,0,0.5)"}}})}),e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",mt:.5},children:[e.jsx(l,{variant:"caption",color:"text.secondary",children:"0 min"}),e.jsxs(d,{sx:{textAlign:"right"},children:[e.jsxs(l,{variant:"caption",sx:{color:"text.primary",fontWeight:"bold",display:"block"},children:["Reduktion: -",y," min"]}),y>0&&e.jsxs(l,{variant:"caption",sx:{color:re?i.accents.red:"text.secondary"},children:["Kosten: ",st," Credits"]})]})]}),Ye&&e.jsxs(l,{variant:"caption",color:"error",sx:{mt:1,display:"block",fontWeight:"bold"},children:["LIMIT ÜBERSCHRITTEN! (",Ze," min)"]})]})]}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2,alignItems:"center"},children:[e.jsx(d,{sx:{position:"relative",width:"100%"},children:e.jsxs(M,{fullWidth:!0,variant:"contained",size:"large",disabled:Ye,onMouseDown:x,onMouseUp:p,onMouseLeave:p,onTouchStart:x,onTouchEnd:p,sx:{py:2,bgcolor:$?i.primary.dark:i.primary.main,overflow:"hidden"},children:[$?"HALTEN...":y>0?re?"KREDIT AUFNEHMEN":"KAUFEN & AKZEPTIEREN":"AKZEPTIEREN",e.jsx(d,{sx:{position:"absolute",left:0,top:0,bottom:0,width:`${T}%`,bgcolor:"rgba(255,255,255,0.2)",transition:"width 0.05s linear"}})]})}),e.jsxs(l,{variant:"caption",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Dt,{fontSize:"small",color:"warning"})," Entscheidung ist final."]}),e.jsx(M,{color:"error",onClick:b,children:"Ablehnen (Strafe)"})]})]})},At=()=>{const W=n.items.map(A=>r.find(F=>F.id===A.id)||A);return e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(l,{variant:"overline",color:"primary",sx:{letterSpacing:2},children:"VORBEREITUNG"}),e.jsx(xe,{icon:e.jsx(sn,{}),label:qe,color:"warning",variant:"outlined",size:"small"})]}),e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:2,my:3},children:W.map((A,F)=>{var U;return e.jsxs(d,{sx:{textAlign:"center",flex:"1 1 140px",maxWidth:160},children:[A.img||A.imageUrl?e.jsx(Be,{src:A.img||A.imageUrl,sx:{width:100,height:100,border:`2px solid ${i.primary.main}`,mx:"auto",mb:1,boxShadow:"0 0 15px rgba(0,0,0,0.5)"}}):e.jsx(d,{sx:{width:100,height:100,borderRadius:"50%",border:`2px solid ${i.primary.main}`,display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:1,bgcolor:"rgba(0,0,0,0.3)"},children:e.jsx(Os,{sx:{fontSize:40}})}),e.jsx(l,{variant:"subtitle1",sx:{fontWeight:"bold",lineHeight:1.2},children:A.name||A.brand}),e.jsxs(l,{variant:"caption",color:"text.secondary",display:"block",sx:{mb:.5},children:[A.subCategory," ",A.color?`• ${A.color}`:""]}),e.jsx(xe,{icon:e.jsx(us,{}),label:A.customId||((U=A.id)==null?void 0:U.substring(0,6)),size:"small",variant:"outlined",sx:{mb:.5,borderColor:"rgba(255,255,255,0.1)",color:"text.secondary",fontSize:"0.65rem",height:20}}),A.location&&e.jsx(xe,{label:`${A.location}`,size:"small",sx:{display:"flex",mx:"auto",maxWidth:"fit-content",bgcolor:"rgba(255,255,255,0.1)",fontSize:"0.65rem",height:20}})]},F)})}),e.jsx(Qe,{severity:"info",sx:{mb:3,textAlign:"left",bgcolor:"rgba(2, 136, 209, 0.1)"},children:"Item(s) suchen und anziehen. Danach Session starten."}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2,alignItems:"center"},children:[e.jsx(M,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>at(!1),startIcon:e.jsx(As,{}),sx:{py:2,bgcolor:i.accents.green,"&:hover":{bgcolor:i.accents.green}},children:"SESSION STARTEN (MANUELL)"}),e.jsx(M,{fullWidth:!0,variant:"outlined",size:"large",onClick:Rt,startIcon:e.jsx(gs,{}),disabled:S,sx:{py:1.5,borderColor:"rgba(255,255,255,0.3)",color:"text.primary"},children:S?"SCANNER LÄUFT...":"SCAN STARTEN (NFC)"}),e.jsx(M,{color:"inherit",onClick:s,children:"Später fortsetzen"})]})]})},He=()=>c==="loading"?e.jsx(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:4},children:e.jsx(Ge,{color:"primary"})}):n?I==="preparation"||n.isAccepted?At():Mt():a?L?e.jsxs(d,{sx:{textAlign:"center",py:2},children:[e.jsx(l,{variant:"overline",color:"primary",sx:{letterSpacing:2,display:"block",mb:2},children:"DEINE WAHL"}),e.jsx(Be,{src:L.imageUrl||L.image,variant:"rounded",sx:{width:150,height:150,mx:"auto",mb:3,border:`1px solid ${i.primary.main}`}}),e.jsx(l,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:L.name||L.brand}),e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:[L.customId," • ",L.subCategory]}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(M,{variant:"contained",size:"large",fullWidth:!0,onClick:$e,startIcon:e.jsx(Kt,{}),sx:{...R.buttonGradient},children:"Anziehen & Genießen"}),e.jsx(M,{color:"inherit",onClick:s,children:"Doch nicht (Schließen)"})]})]}):e.jsxs(d,{sx:{textAlign:"center",py:3},children:[e.jsx(d,{sx:{mb:2},children:u==="Holiday"?e.jsx(gn,{sx:{fontSize:50,color:i.accents.gold}}):e.jsx(un,{sx:{fontSize:50,color:i.accents.green}})}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:u==="Holiday"?"Feiertag":"Wochenende"}),e.jsx(l,{variant:"body1",color:"text.secondary",sx:{mt:2,px:2,fontStyle:"italic"},children:"Es ist zwar Wochenende, aber du stehst doch darauf, dir eine sexy, schwarze, glänzende Strumpfhose anzuziehen. Ich suche dir gerne eine raus."}),e.jsxs(d,{sx:{mt:4,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(M,{variant:"outlined",color:"primary",fullWidth:!0,onClick:Oe,startIcon:e.jsx(Kt,{}),children:"Ja, bitte"}),e.jsx(M,{color:"inherit",onClick:s,children:"Nein, danke"})]})]}):e.jsxs(d,{sx:{textAlign:"center",py:3},children:[e.jsx(d,{sx:{bgcolor:"rgba(255,255,255,0.05)",width:60,height:60,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:2},children:h?e.jsx(Cn,{sx:{color:i.accents.purple,fontSize:30}}):e.jsx($s,{sx:{color:i.accents.gold,fontSize:30}})}),e.jsx(l,{variant:"h6",children:"Keine Anweisung"})]}),ke=!n&&!L||(n==null?void 0:n.isAccepted)||a&&L;return e.jsxs(e.Fragment,{children:[e.jsxs(me,{open:t,onClose:ke?s:void 0,disableEscapeKeyDown:!ke,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:ae},children:[e.jsx(pe,{sx:R.dialog.content.sx,children:e.jsx(oe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:He()},I)}),!n&&ke&&e.jsx(je,{sx:R.dialog.actions.sx,children:e.jsx(M,{onClick:s,fullWidth:!0,color:"inherit",children:"Schließen"})})]}),e.jsxs(me,{open:ee,disableEscapeKeyDown:!0,PaperProps:{sx:{...ae,border:`1px solid ${i.accents.red}`}},children:[e.jsxs(ye,{sx:{...R.dialog.title.sx,color:i.accents.red},children:[e.jsx(Dt,{})," Hardcore Protokoll"]}),e.jsx(pe,{sx:R.dialog.content.sx,children:e.jsx(oe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs(d,{sx:{textAlign:"center",py:2},children:[e.jsx(da,{sx:{color:"text.primary",mb:2},children:e.jsx("strong",{children:"Eine sofortige Entladung wird gefordert."})}),_&&e.jsxs(d,{sx:{p:2,bgcolor:"rgba(255, 0, 0, 0.1)",border:`1px solid ${i.accents.red}`,borderRadius:"8px"},children:[e.jsx(l,{variant:"caption",color:"error",sx:{textTransform:"uppercase",letterSpacing:1},children:"Vorgeschriebene Methode"}),e.jsx(l,{variant:"h6",sx:{color:"#fff",fontWeight:"bold",mt:1},children:_})]})]})})}),e.jsxs(je,{sx:R.dialog.actions.sx,children:[e.jsx(M,{fullWidth:!0,variant:"contained",color:"error",onClick:On,children:"Akzeptieren"}),e.jsx(M,{fullWidth:!0,variant:"outlined",color:"warning",onClick:Nn,children:"Verweigern (Strafe)"})]})]})]})}var kn={},Ro=B;Object.defineProperty(kn,"__esModule",{value:!0});var Hs=kn.default=void 0,zo=Ro(G()),as=e;Hs=kn.default=(0,zo.default)([(0,as.jsx)("path",{d:"M8.55 12c-1.07-.71-2.25-1.27-3.53-1.61 1.28.34 2.46.9 3.53 1.61m10.43-1.61c-1.29.34-2.49.91-3.57 1.64 1.08-.73 2.28-1.3 3.57-1.64"},"0"),(0,as.jsx)("path",{d:"M15.49 9.63c-.18-2.79-1.31-5.51-3.43-7.63-2.14 2.14-3.32 4.86-3.55 7.63 1.28.68 2.46 1.56 3.49 2.63 1.03-1.06 2.21-1.94 3.49-2.63m-6.5 2.65c-.14-.1-.3-.19-.45-.29.15.11.31.19.45.29m6.42-.25c-.13.09-.27.16-.4.26.13-.1.27-.17.4-.26M12 15.45C9.85 12.17 6.18 10 2 10c0 5.32 3.36 9.82 8.03 11.49.63.23 1.29.4 1.97.51.68-.12 1.33-.29 1.97-.51C18.64 19.82 22 15.32 22 10c-4.18 0-7.85 2.17-10 5.45"},"1")],"Spa");function Mo({open:t,onClose:s,step:n,timer:r,intensity:c,setIntensity:h,onStartTimer:a,onSkipTimer:u,onDecision:x}){const[p,b]=o.useState("ruined"),j=$=>{const g=Math.floor($/60),v=$%60;return`${g}:${v<10?"0":""}${v}`},m=()=>{switch(n){case"confirm":return e.jsxs(d,{sx:{textAlign:"center",py:2},children:[e.jsx(js,{sx:{fontSize:60,color:i.primary.main,mb:2}}),e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Edging Phase"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Das Protokoll schreibt eine 10-minütige Edging-Phase vor. Halte die Erregung hoch, aber komme nicht zum Höhepunkt."})]});case"timer":return e.jsxs(d,{sx:{textAlign:"center",py:4},children:[e.jsxs(d,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(Ge,{variant:"determinate",value:(1-r/600)*100,size:120,thickness:2,sx:{color:i.primary.main}}),e.jsx(d,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(l,{variant:"h4",component:"div",color:"text.primary",children:j(r)})})]}),e.jsx(l,{variant:"caption",sx:{display:"block",mt:2,color:"text.secondary"},children:"Halten..."})]});case"decision":return e.jsxs(d,{children:[e.jsx(l,{gutterBottom:!0,color:"text.secondary",children:"Intensität (1-10)"}),e.jsx(Ss,{value:c,onChange:($,g)=>h(g),min:1,max:10,marks:!0,sx:{color:i.accents.pink,mb:3}}),e.jsx(l,{gutterBottom:!0,color:"text.secondary",children:"Ergebnis"}),e.jsxs(aa,{value:p,exclusive:!0,onChange:($,g)=>g&&b(g),fullWidth:!0,orientation:"vertical",sx:{gap:1},children:[e.jsx(Wt,{value:"full",sx:{borderColor:"rgba(255,255,255,0.1)",color:"text.secondary","&.Mui-selected":{bgcolor:`${i.accents.pink}20`,color:"#fff",borderColor:i.accents.pink}},children:"Full Release"}),e.jsx(Wt,{value:"ruined",sx:{borderColor:"rgba(255,255,255,0.1)",color:"text.secondary","&.Mui-selected":{bgcolor:`${i.accents.purple}20`,color:"#fff",borderColor:i.accents.purple}},children:"Ruined / Denied"}),e.jsx(Wt,{value:"leaked",sx:{borderColor:"rgba(255,255,255,0.1)",color:"text.secondary","&.Mui-selected":{bgcolor:`${i.accents.blue}20`,color:"#fff",borderColor:i.accents.blue}},children:"Leaked / Pre-Cum"})]})]});default:return null}},T=()=>{switch(n){case"confirm":return e.jsxs(e.Fragment,{children:[e.jsx(M,{onClick:s,color:"inherit",children:"Abbrechen"}),e.jsx(M,{variant:"contained",onClick:a,sx:{bgcolor:i.primary.main},children:"Timer Starten"})]});case"timer":return e.jsxs(e.Fragment,{children:[e.jsx(M,{onClick:s,color:"inherit",children:"Abbrechen"}),e.jsx(M,{onClick:u,color:"warning",children:"Überspringen"})]});case"decision":return e.jsxs(e.Fragment,{children:[e.jsx(M,{onClick:s,color:"inherit",children:"Abbrechen"}),e.jsx(M,{variant:"contained",onClick:()=>x(p),sx:{bgcolor:i.accents.pink,color:"#fff"},children:"Protokollieren"})]});default:return e.jsx(M,{onClick:s,children:"Schließen"})}};return e.jsxs(me,{open:t,onClose:s,maxWidth:"xs",fullWidth:!0,PaperProps:R.dialog.paper,children:[e.jsxs(ye,{sx:{...R.dialog.title.sx,color:i.accents.pink},children:[e.jsx(Hs,{sx:{mr:1}})," Release Protokoll"]}),e.jsx(pe,{sx:R.dialog.content.sx,children:m()}),e.jsx(je,{sx:R.dialog.actions.sx,children:T()})]})}var _n={},Ao=B;Object.defineProperty(_n,"__esModule",{value:!0});var Fs=_n.default=void 0,Eo=Ao(G()),To=e;Fs=_n.default=(0,Eo.default)((0,To.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen");function $o({open:t,onClose:s,mode:n,punishmentItem:r,isScanning:c,onScan:h}){const a=n==="start",u=a?"Strafe antreten":"Strafe beenden",x=a?"Scanne den NFC-Tag des Straf-Items, um die Session zu beginnen.":"Scanne den NFC-Tag, um die Strafe offiziell zu beenden.",p=a?i.accents.red:i.primary.main;return e.jsxs(me,{open:t,onClose:c?void 0:s,maxWidth:"xs",fullWidth:!0,PaperProps:R.dialog.paper,children:[e.jsxs(ye,{sx:{...R.dialog.title.sx,color:p},children:[a?e.jsx(ps,{sx:{mr:1}}):e.jsx(Fs,{sx:{mr:1}}),u]}),e.jsx(pe,{sx:R.dialog.content.sx,children:e.jsxs(d,{sx:{textAlign:"center",py:3,display:"flex",flexDirection:"column",alignItems:"center",gap:3},children:[r&&e.jsx(l,{variant:"h6",sx:{color:i.text.primary,fontWeight:"bold"},children:r.name||"Straf-Item"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:x}),e.jsxs(d,{sx:{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center"},children:[c&&e.jsx(d,{sx:{position:"absolute"},children:e.jsx(oe.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(Ge,{size:90,sx:{color:p,opacity:.5},thickness:2})})}),e.jsx(M,{variant:"outlined",onClick:h,disabled:c,sx:{width:80,height:80,borderRadius:"50%",borderColor:p,color:p,borderWidth:2,"&:hover":{borderWidth:2,bgcolor:"rgba(255,255,255,0.05)",borderColor:p}},children:e.jsx(gs,{sx:{fontSize:40}})})]}),e.jsx(l,{variant:"caption",sx:{color:c?i.text.primary:i.text.muted},children:c?"Suche nach NFC Tag...":"Tippe zum Scannen"})]})}),e.jsx(je,{sx:R.dialog.actions.sx,children:e.jsx(M,{onClick:s,disabled:c,color:"inherit",children:"Abbrechen"})})]})}function ko({open:t,onClose:s,washingItems:n,onWashItem:r,onWashAll:c}){return e.jsxs(me,{open:t,onClose:s,fullWidth:!0,maxWidth:"sm",PaperProps:R.dialog.paper,children:[e.jsxs(ye,{sx:{...R.dialog.title.sx,color:i.accents.blue,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Is,{color:"inherit"})," Wäschekorb"]}),e.jsx(pe,{dividers:!0,sx:R.dialog.content.sx,children:e.jsxs(ys,{children:[n.map(h=>e.jsxs(bs,{alignItems:"flex-start",secondaryAction:e.jsx(M,{size:"small",variant:"outlined",onClick:()=>r(h.id),startIcon:e.jsx(Es,{fontSize:"small"}),sx:{borderColor:"rgba(255,255,255,0.2)",color:"text.primary",minWidth:"auto",px:1.5,fontSize:"0.75rem",ml:1},children:"Waschen"}),children:[e.jsx(Ds,{children:e.jsx(Be,{src:h.imageUrl,variant:"rounded",sx:{width:50,height:50,mr:2,mt:.5}})}),e.jsx(vs,{primary:e.jsx(l,{variant:"subtitle2",component:"div",sx:{fontWeight:"bold"},children:h.name||h.brand}),secondary:e.jsxs(e.Fragment,{children:[e.jsx(l,{component:"span",variant:"body2",display:"block",color:"text.secondary",children:h.subCategory}),e.jsxs(l,{component:"span",variant:"caption",display:"block",color:"text.disabled",sx:{fontSize:"0.7rem"},children:["ID: ",h.customId||h.id]})]})})]},h.id)),n.length===0&&e.jsx(l,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",py:4},children:"Der Wäschekorb ist leer."})]})}),e.jsxs(je,{sx:R.dialog.actions.sx,children:[e.jsx(M,{onClick:s,color:"inherit",children:"Schließen"}),n.length>0&&e.jsxs(M,{variant:"contained",onClick:c,sx:{bgcolor:i.accents.blue},children:["Alles waschen (",n.length,")"]})]})]})}var Pn={},_o=B;Object.defineProperty(Pn,"__esModule",{value:!0});var Bs=Pn.default=void 0,Po=_o(G()),Wo=e;Bs=Pn.default=(0,Po.default)((0,Wo.jsx)("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2zm-9-2h10V8H12zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"AccountBalanceWallet");var Wn={},Lo=B;Object.defineProperty(Wn,"__esModule",{value:!0});var Gs=Wn.default=void 0,No=Lo(G()),Oo=e;Gs=Wn.default=(0,No.default)((0,Oo.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline");var Ln={},Ho=B;Object.defineProperty(Ln,"__esModule",{value:!0});var Us=Ln.default=void 0,Fo=Ho(G()),Bo=e;Us=Ln.default=(0,Fo.default)((0,Bo.jsx)("path",{d:"M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5m-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3z"}),"LinkOff");const Go=["Sicher / Geborgen","Erregt","Gedemütigt","Exponiert / Öffentlich","Feminin","Besitztum (Owned)","Unwürdig","Stolz"],is=t=>{const s=t.getTimezoneOffset()*6e4;return new Date(t.getTime()-s).toISOString().split("T")[0]},os=()=>{const t=new Date,s=t.getHours()*60+t.getMinutes(),n=s>=450&&s<1380;let r=is(t);if(s<450){const c=new Date(t);c.setDate(c.getDate()-1),r=is(c)}return`${r}-${n?"day":"night"}`},Uo=t=>{const s=t.getDate(),n=t.getMonth()+1;return n===12&&(s===24||s===25||s===26)||n===12&&s===31||n===1&&s===1},Vo=({open:t,onClose:s,details:n})=>{if(!n)return null;const r=(c,h,a,u)=>e.jsxs(d,{sx:{mb:2},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[u,e.jsx(l,{variant:"body2",color:"text.secondary",children:c})]}),e.jsxs(l,{variant:"body2",sx:{fontWeight:"bold",color:a},children:[Math.round(h),"%"]})]}),e.jsx(tt,{variant:"determinate",value:h,sx:{height:6,borderRadius:3,bgcolor:"rgba(255,255,255,0.05)","& .MuiLinearProgress-bar":{bgcolor:a}}})]});return e.jsxs(me,{open:t,onClose:s,fullWidth:!0,maxWidth:"xs",PaperProps:R.dialog.paper,children:[e.jsxs(ye,{sx:R.dialog.title.sx,children:[e.jsx(wt,{color:"primary"})," Fem-Index 2.0"]}),e.jsxs(pe,{sx:R.dialog.content.sx,children:[e.jsxs(d,{sx:{textAlign:"center",mb:4},children:[e.jsx(l,{variant:"h2",sx:{...R.textGradient,fontWeight:"bold",fontSize:"3.5rem"},children:n.score}),e.jsx(l,{variant:"overline",color:"text.secondary",children:"COMPOSITE SCORE"})]}),e.jsxs(d,{sx:{px:1},children:[r("Physis (Körper)",n.subScores.physis,"#00e5ff",e.jsx(Gs,{fontSize:"small",sx:{color:"#00e5ff"}})),r("Psyche (Wille)",n.subScores.psyche,"#ffeb3b",e.jsx(sn,{fontSize:"small",sx:{color:"#ffeb3b"}})),r("Infiltration (Alltag)",n.subScores.infiltration,"#f50057",e.jsx(Us,{fontSize:"small",sx:{color:"#f50057"}}))]})]}),e.jsx(je,{sx:R.dialog.actions.sx,children:e.jsx(M,{onClick:s,fullWidth:!0,color:"inherit",children:"Schließen"})})]})};function mc(){var Xn;const{currentUser:t}=Ct(),{items:s,loading:n}=ds(),r=Lr(),{startBindingScan:c,isScanning:h}=fs(),{activeSessions:a,progress:u,loading:x,dailyTargetHours:p,registerRelease:b}=$i(t),j=ms(s,a),{femIndex:m,femIndexLoading:T,indexDetails:$,phase:g,subScores:v}=_s(j),[S,C]=o.useState(Date.now()),[I,D]=o.useState(!1),[P,q]=o.useState(null),[L,le]=o.useState(!0),[ee,De]=o.useState(null),[be,w]=o.useState(!0),[K,O]=o.useState(!1),[_,J]=o.useState(null),[te,z]=o.useState("idle"),[y,Z]=o.useState(!1),[de,we]=o.useState(null),[ue,Se]=o.useState([]),[Ue,nt]=o.useState(""),[st,Ve]=o.useState(0),[re,We]=o.useState(!1),qe=o.useRef(null),[rt,Ee]=o.useState(!1),[Ce,Ke]=o.useState(!1),[Rt,Le]=o.useState(!1),[Ne,at]=o.useState([]),[Te,Ze]=o.useState(0),[Ye,zt]=o.useState(5),[Nn,On]=o.useState(!0),[Oe,$e]=o.useState({active:!1,deferred:!1,reason:null,durationMinutes:0}),[ae,Mt]=o.useState(null),[At,He]=o.useState(!1),[ke,it]=o.useState(null),[ot,ct]=o.useState(0),[W,A]=o.useState(0),[F,U]=o.useState(1),[V,he]=o.useState(os()),[ne,Re]=o.useState(!1),[lt,Vs]=o.useState(""),[qs,Et]=o.useState(!1),[Ks,dt]=o.useState("confirm"),[Zs,Hn]=o.useState(600),[Fn,Bn]=o.useState(3),ze=o.useRef(null),[Ys,Js]=o.useState(!1),[ut,Gn]=o.useState({open:!1,message:"",severity:"success"}),[Tt,ht]=o.useState(!1),[Xs,Un]=o.useState(null),[Qs,$t]=o.useState(!1),[Vn,er]=o.useState([]),[qn,Kn]=o.useState(!1),[tr,Zn]=o.useState(!1),[nr,Yn]=o.useState({nc:0,lc:0}),sr=V?V.includes("night"):!1,Me=a.some(f=>f.type==="instruction"),rr=a.some(f=>f.type==="punishment"),ar=u.isDailyGoalMet,ir=a.some(f=>f.type==="voluntary"&&!f.endTime),ft=ot-W,X=(f,k="success")=>Gn({open:!0,message:f,severity:k}),or=()=>Gn({...ut,open:!1});o.useEffect(()=>{if(!t)return;(async()=>{try{const Q=await se(H(E,`users/${t.uid}/settings/preferences`));Q.exists()&&U(Q.data().maxInstructionItems||1);const Y=await mt(t.uid);$e(Y||{active:!1}),Ke(await gi(t.uid)),ct(await vi(t.uid));const Je=H(E,`users/${t.uid}/settings/budget`),xt=await se(Je);xt.exists()&&A(xt.data().currentSpent||0);const _t=await Xr(t.uid);De(_t);const Pt=await Br(t.uid);Zn(Pt)}catch(Q){console.error(Q)}finally{w(!1)}})();const k=Fe(H(E,`users/${t.uid}/status/timeBank`),Q=>{Q.exists()?Yn(Q.data()):Yn({nc:0,lc:0})}),N=setInterval(()=>C(Date.now()),6e4);return()=>{clearInterval(N),k()}},[t]),o.useEffect(()=>{s.length>0&&Mt(Nr(s))},[s]),o.useEffect(()=>{let f;const k=async()=>{if(!(!t||n))try{const N=await pt(t.uid);if(N.isActive)I||(D(!0),N.startTime&&q(N.startTime));else{if(I&&(D(!1),q(null)),!qn&&s.length>0)if(await Gr(t.uid,!1,Me)){const Y=Ur(s);Y.length>0&&(er(Y),$t(!0),Kn(!0))}else Kn(!0);Me&&await Vr(t.uid,a,s)&&(D(!0),q(new Date))}}catch(N){console.error("TZD Check Error",N)}finally{le(!1)}};return t&&!n&&(k(),f=setInterval(k,3e5)),()=>clearInterval(f)},[t,s,a,n,I,Me,qn]),o.useEffect(()=>{if(s.length>0&&!x&&V){const f=te==="idle",k=_&&_.periodId!==V;(f||k)&&te!=="loading"&&(async()=>{var Q;z("loading");try{let Y=await Di(t.uid);if(Y&&Y.periodId===V){if(Y.isAccepted&&!Y.evasionPenaltyTriggered){const Je=(Q=Y.acceptedAt)!=null&&Q.toDate?Y.acceptedAt.toDate():new Date(Y.acceptedAt),xt=(new Date-Je)/6e4,_t=a.some(Pt=>Pt.type==="instruction");xt>30&&!_t&&(console.log("Flucht erkannt (Initial Check - Post Oath)! Trigger 150% TZD."),await es(t.uid,Y.items),await fe(H(E,`users/${t.uid}/status/dailyInstruction`),{evasionPenaltyTriggered:!0}),D(!0),O(!1),Y=null)}Y&&J(Y)}else if(!ne||V.includes("night")){const Je=await Ri(t.uid,s,a,V);J(Je)}else J(null)}catch(Y){console.error("Instruction Load Error",Y)}finally{z("ready")}})()}},[s.length,x,V,_,te,ne,a]),o.useEffect(()=>{if(!_||!_.isAccepted||_.evasionPenaltyTriggered||Me)return;const f=setInterval(async()=>{var Q;const k=(Q=_.acceptedAt)!=null&&Q.toDate?_.acceptedAt.toDate():new Date(_.acceptedAt);(Date.now()-k)/6e4>30&&(console.log("Flucht erkannt (Live Watcher - Post Oath)! Trigger 150% TZD."),J(Y=>({...Y,evasionPenaltyTriggered:!0})),O(!1),await es(t.uid,_.items),await fe(H(E,`users/${t.uid}/status/dailyInstruction`),{evasionPenaltyTriggered:!0}),D(!0),X("Zeitüberschreitung nach Eid: Strafe eingeleitet.","error"))},6e4);return()=>clearInterval(f)},[_,t,Me]),o.useEffect(()=>{if(Me&&_){const f=_.forcedRelease;f&&f.required===!0&&f.executed===!1&&(Tt||(Un(f.method),ht(!0)))}},[Me,_,Tt]),o.useEffect(()=>{const f=os();f!==V&&he(f);const k=new Date(S),N=k.getDay(),Q=N===0||N===6,Y=Uo(k);Re(Q||Y),Vs(Y?"Holiday":Q?"Weekend":"")},[S]);const cr=async()=>{const f=await qr(t.uid,Vn);if($t(!1),f.win)X("GEWINN! 24h Immunität aktiviert.","success"),Zn(!0);else{const k=a.filter(N=>N.type==="voluntary"&&!N.endTime);if(k.length>0)try{const N=k.map(Q=>ns(t.uid,Q.id,{feelings:["System Override"],note:"Zwangsabbruch durch Gamble-Verlust (System Override)."}));await Promise.all(N),X(`${k.length} Session(s) durch Protokoll überschrieben.`,"warning")}catch(N){console.error(N)}X("VERLOREN. Zeitloses Diktat aktiviert.","error"),D(!0),q(new Date)}},lr=()=>{$t(!1),X("Sicher ist sicher...","info")},dr=async f=>{var N;if(I){X("ZUGRIFF VERWEIGERT: Zeitloses Diktat aktiv.","error");return}const k=f||(_==null?void 0:_.items);k&&k.length>0&&(await Ft(t.uid,{items:k,type:"instruction",periodId:_.periodId,acceptedAt:_.acceptedAt}),O(!1),X(`${k.length} Sessions gestartet.`,"success"),(N=_==null?void 0:_.forcedRelease)!=null&&N.required&&!_.forcedRelease.executed&&(Un(_.forcedRelease.method),ht(!0)))},ur=()=>{We(!0),Ve(0),qe.current=setInterval(()=>{Ve(f=>f>=100?(clearInterval(qe.current),fr(),100):f+.4)},20)},hr=()=>{clearInterval(qe.current),We(!1),Ve(0)},fr=async()=>{const f=new Date().toISOString(),k=Kr(E);k.update(H(E,`users/${t.uid}/status/dailyInstruction`),{isAccepted:!0,acceptedAt:f}),await k.commit(),J(N=>({...N,isAccepted:!0,acceptedAt:f})),We(!1)},xr=async()=>{await Zr(t.uid);const f=await mt(t.uid);$e(f||{active:!1}),O(!1),We(!1)},Jn=async()=>{if(ae){await ls(Ie(E,`users/${t.uid}/sessions`),{itemId:ae.id,itemIds:[ae.id],type:"punishment",startTime:ge(),endTime:null}),await fe(H(E,`users/${t.uid}/status/punishment`),{active:!0,deferred:!1});const f=await mt(t.uid);$e(f||{active:!1}),He(!1)}},gr=()=>{c(f=>{ae&&(f===ae.nfcTagId||f===ae.customId||f===ae.id)?ke==="start"?Jn():ke==="stop"&&(He(!1),Se([]),nt(""),Z(!0)):X("Falscher Tag!","error")})},mr=f=>{if(I){X("STOPPEN VERWEIGERT.","error");return}f.type==="punishment"&&Math.floor((Date.now()-f.startTime.getTime())/6e4)<(Oe.durationMinutes||30)||(we(f),Se([]),nt(""),Z(!0))},pr=async()=>{if(de)try{await ns(t.uid,de.id,{feelings:ue,note:Ue}),de.type==="punishment"&&(await Yr(t.uid),$e({active:!1,deferred:!1,reason:null,durationMinutes:0}))}catch{X("Fehler","error")}finally{Z(!1),we(null)}},br=async()=>{const f=await mi(t.uid,s);at(f),Ze(0),Le(!0)},vr=async()=>{await bi(t.uid,Ne[Te].id,Ye),X(`${Ne[Te].name} geprüft`,"success"),Te<Ne.length-1?Ze(f=>f+1):(Le(!1),Ke(!1),X("Audit abgeschlossen","success"))},kt=()=>{dt("confirm"),Hn(600),Bn(3),Et(!0)},yr=()=>{dt("timer"),ze.current&&clearInterval(ze.current),ze.current=setInterval(()=>{Hn(f=>f<=1?(clearInterval(ze.current),dt("decision"),0):f-1)},1e3)},jr=()=>{ze.current&&clearInterval(ze.current),dt("decision")},Sr=async f=>{try{await b(f,Fn),f==="maintained"?X("Disziplin bewiesen.","success"):X("Sessions beendet.","warning")}catch{X("Fehler beim Release","error")}finally{Et(!1),ze.current&&clearInterval(ze.current)}},Ir=async f=>{const k=f||"clean";try{await zi(t.uid,"maintained",5,k),await fe(H(E,`users/${t.uid}/status/dailyInstruction`),{"forcedRelease.executed":!0}),J(N=>({...N,forcedRelease:{...N.forcedRelease,executed:!0}})),ht(!1),k==="clean"?X("Brav. Sauber und gehorsam.","success"):X("Schmutzig... aber gehorsam. Status gespeichert.","warning")}catch(N){console.error("Error confirming forced release:",N),X("Fehler beim Speichern.","error")}},Dr=async()=>{try{await xs(t.uid,"Forced Release Protocol verweigert",60);const f=await mt(t.uid);$e(f||{active:!1}),await fe(H(E,`users/${t.uid}/status/dailyInstruction`),{"forcedRelease.executed":!0}),J(k=>({...k,forcedRelease:{...k.forcedRelease,executed:!0}})),ht(!1),X("Strafe registriert. Schlaf jetzt... wenn du kannst.","warning")}catch(f){console.error("Error refusing forced release:",f)}};if(be)return e.jsx(d,{sx:{p:4,textAlign:"center"},children:"System Check..."});if(L)return e.jsxs(d,{sx:{height:"100vh",width:"100vw",bgcolor:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999,position:"fixed",top:0,left:0},children:[e.jsx(Ae,{sx:{fontSize:60,color:i.accents.red,mb:2}}),e.jsx(l,{variant:"overline",sx:{color:"text.secondary",letterSpacing:4,animation:"pulse 1.5s infinite"},children:"SYSTEM INTERLOCK..."})]});if(ee)return e.jsx(d,{sx:R.bottomNavSpacer,children:e.jsxs(Ht,{maxWidth:"sm",sx:{pt:10,textAlign:"center"},children:[e.jsx(d,{sx:{mb:4,color:i.accents.gold},children:e.jsx(Or.Shield,{sx:{fontSize:80}})}),e.jsx(l,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold",letterSpacing:2},children:"PROTOKOLL AUSGESETZT"}),e.jsxs(yt,{sx:{p:4,...R.glassCard,border:`1px solid ${i.accents.gold}`},children:[e.jsx(xe,{label:ee.type.toUpperCase(),sx:{bgcolor:i.accents.gold,color:"#000",fontWeight:"bold",mb:2}}),e.jsx(l,{variant:"h6",sx:{mb:1},children:ee.reason}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:["Geplant bis: ",ee.endDate.toLocaleDateString()]}),e.jsx(It,{sx:{my:3}}),e.jsx(l,{variant:"caption",sx:{display:"block",mb:2},children:"Status: Autorisierte Abwesenheit. Keine Aufgaben."})]}),e.jsx(l,{variant:"caption",color:"text.secondary",sx:{mt:4,display:"block"},children:"Um den Dienst wieder aufzunehmen, gehe zu Einstellungen."})]})});const wr=s.filter(f=>f.status==="washing").length;return e.jsxs(d,{sx:R.bottomNavSpacer,children:[e.jsx(Oi,{active:I,allItems:s}),e.jsx(qi,{open:Tt,method:Xs,onConfirm:Ir,onRefuse:Dr}),e.jsx(Ji,{open:Qs,stakeItems:Vn,onAccept:cr,onDecline:lr,hasActiveSession:ir}),e.jsx(Ht,{maxWidth:"md",sx:{pt:2,pb:4},children:e.jsxs(oe.div,{variants:Hr.page,initial:"initial",animate:"animate",exit:"exit",children:[e.jsxs(d,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(l,{variant:"h4",sx:R.textGradient,children:"Dashboard"}),tr&&e.jsx(xe,{icon:e.jsx(hs,{sx:{color:"#000 !important"}}),label:"IMMUN",sx:{bgcolor:i.accents.green,color:"#000",fontWeight:"bold"}})]}),e.jsx(to,{currentMinutes:u.currentContinuousMinutes,targetHours:p,isGoalMetToday:u.isDailyGoalMet,progressData:u}),e.jsx(ho,{femIndex:m||0,loading:T,phase:g,subScores:v}),e.jsx(fo,{punishmentStatus:Oe,punishmentRunning:rr,auditDue:Ce,isFreeDay:ne,freeDayReason:lt,currentInstruction:_,currentPeriod:V,isHoldingOath:re,isInstructionActive:Me,isDailyGoalMet:ar,onOpenInstruction:()=>O(!0),onStartPunishment:()=>{ae!=null&&ae.nfcTagId?(it("start"),He(!0)):Jn()},onStartAudit:br,onOpenRelease:kt}),e.jsx(po,{activeSessions:a,items:s,punishmentStatus:Oe,onNavigateItem:f=>r(`/item/${f}`),onStopSession:mr,onOpenRelease:kt}),!Oe.active&&e.jsx(d,{sx:{mb:4},children:e.jsx(M,{fullWidth:!0,onClick:kt,startIcon:e.jsx(et,{}),sx:{mb:0,py:2,borderRadius:"28px",bgcolor:"rgba(64, 196, 255, 0.12)",color:"#40c4ff",border:"1px solid rgba(64, 196, 255, 0.1)",fontSize:"0.9rem",fontWeight:"bold",letterSpacing:"1.25px",textTransform:"uppercase",boxShadow:"none",transition:"all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1)","&:hover":{bgcolor:"rgba(64, 196, 255, 0.2)",borderColor:"rgba(64, 196, 255, 0.3)",boxShadow:"0 0 15px rgba(64, 196, 255, 0.15)",transform:"translateY(-1px)"},"&:active":{bgcolor:"rgba(64, 196, 255, 0.25)",transform:"scale(0.98)"}},children:"SPERMA ENTLADUNG"})}),e.jsx(It,{sx:{my:4,borderColor:"rgba(255,255,255,0.1)"},children:e.jsx(l,{variant:"caption",color:"text.secondary",children:"METRIKEN & VERWALTUNG"})}),e.jsx(bo,{kpis:j,timeBank:nr}),e.jsxs(M,{variant:"contained",fullWidth:!0,size:"large",onClick:()=>Ee(!0),sx:{mb:2,mt:3,py:2,bgcolor:"rgba(255,255,255,0.05)",color:"text.primary",boxShadow:"none",justifyContent:"space-between",px:3,"&:hover":{bgcolor:"rgba(255,255,255,0.1)",boxShadow:"none"}},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Is,{}),e.jsx(l,{variant:"button",sx:{fontWeight:"bold"},children:"Wäschekorb"})]}),e.jsx(xe,{label:`${wr} Stk.`,size:"small",sx:{bgcolor:"rgba(255,255,255,0.1)",color:"text.primary",fontWeight:"bold",borderRadius:"4px"}})]}),e.jsxs(M,{variant:"contained",fullWidth:!0,size:"large",onClick:()=>r("/budget"),sx:{mb:4,py:2,bgcolor:"rgba(255,255,255,0.05)",color:"text.primary",boxShadow:"none",justifyContent:"space-between",px:3,"&:hover":{bgcolor:"rgba(255,255,255,0.1)",boxShadow:"none"}},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Bs,{}),e.jsx(l,{variant:"button",sx:{fontWeight:"bold"},children:"Budget & Finanzen"})]}),e.jsx(xe,{label:`${ft.toFixed(2)}€`,size:"small",sx:{bgcolor:ft<0?`${i.accents.red}22`:"rgba(255,255,255,0.1)",color:ft<0?i.accents.red:i.accents.green,fontWeight:"bold",borderRadius:"4px",border:`1px solid ${ft<0?i.accents.red:"transparent"}`}})]})]})}),e.jsx(Co,{open:K,onClose:()=>O(!1),instruction:_,items:s,isHoldingOath:re,oathProgress:st,onStartOath:ur,onCancelOath:hr,onDeclineOath:xr,onStartRequest:dr,onNavigateItem:f=>{O(!1),r(`/item/${f}`)},isFreeDay:ne,freeDayReason:lt,loadingStatus:te==="idle"?"loading":te,isNight:sr,showToast:X}),e.jsx($o,{open:At,onClose:()=>He(!1),mode:ke,punishmentItem:ae,isScanning:h,onScan:gr}),e.jsx(ko,{open:rt,onClose:()=>Ee(!1),washingItems:s.filter(f=>f.status==="washing"),onWashItem:async f=>{var k;try{await fe(H(E,`users/${t.uid}/items`,f),{status:"active",cleanDate:ge(),historyLog:ts({type:"wash",date:new Date().toISOString()})}),((k=j==null?void 0:j.basics)==null?void 0:k.washing)<=1&&Ee(!1)}catch{}},onWashAll:async()=>{try{const f=new Date().toISOString(),k=s.filter(N=>N.status==="washing").map(N=>fe(H(E,`users/${t.uid}/items`,N.id),{status:"active",cleanDate:ge(),historyLog:ts({type:"wash",date:f})}));await Promise.all(k),Ee(!1)}catch{}}}),e.jsx(Mo,{open:qs,onClose:()=>Et(!1),step:Ks,timer:Zs,intensity:Fn,setIntensity:Bn,onStartTimer:yr,onSkipTimer:jr,onDecision:Sr}),e.jsxs(me,{open:Rt,onClose:()=>Le(!1),fullWidth:!0,PaperProps:R.dialog.paper,children:[e.jsxs(ye,{sx:R.dialog.title.sx,children:["Audit: ",(Xn=Ne[Te])==null?void 0:Xn.name]}),e.jsx(pe,{sx:R.dialog.content.sx,children:e.jsx(bt,{type:"number",label:"Zustand (1-5)",value:Ye,onChange:f=>zt(parseInt(f.target.value)),fullWidth:!0,sx:{mt:2}})}),e.jsxs(je,{sx:R.dialog.actions.sx,children:[e.jsx(M,{onClick:()=>Le(!1),color:"inherit",children:"Abbrechen"}),e.jsx(M,{onClick:vr,variant:"contained",color:"warning",children:"Bestätigen"})]})]}),e.jsxs(me,{open:y,onClose:()=>Z(!1),fullWidth:!0,maxWidth:"sm",PaperProps:R.dialog.paper,children:[e.jsx(ye,{sx:R.dialog.title.sx,children:"Reflektion"}),e.jsx(pe,{sx:R.dialog.content.sx,children:e.jsx(Ra,{children:Go.map(f=>e.jsx(ua,{control:e.jsx(Sa,{onChange:()=>Se(k=>k.includes(f)?k.filter(N=>N!==f):[...k,f])}),label:f},f))})}),e.jsxs(je,{sx:R.dialog.actions.sx,children:[e.jsx(M,{onClick:()=>Z(!1),color:"inherit",children:"Abbrechen"}),e.jsx(M,{onClick:pr,variant:"contained",children:"Bestätigen"})]})]}),e.jsx(Vo,{open:Ys,onClose:()=>Js(!1),details:$}),e.jsx(Fr,{open:ut.open,autoHideDuration:3e3,onClose:or,children:e.jsx(Qe,{severity:ut.severity,children:ut.message})})]})}export{mc as default};
